<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>The Enso Type Hierarchy · Enso Developer Documentation</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="The developer documentation for the Enso compiler, runtime, and IDE..
"><meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"><meta name="author" content="Enso.org"><link rel="stylesheet" href="/gitbook/style.css">
<link rel="stylesheet" href="/gitbook/gitbook-plugin-fontsettings/website.css">
<!-- <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css"> -->

<link rel="stylesheet" href="/gitbook/rouge-highlight-colorful.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/gitbook/images/apple-touch-icon-precomposed-152.png">
<link rel="shortcut icon" href="/gitbook/images/favicon.ico" type="image/x-icon">
        

        
        


        
        
        

        
        
        

        
            <link rel="prev" href="/docs/enso/types/goals.html" />
        

        
            <link rel="next" href="/docs/enso/types/function-types.html" />
        
    </head>
    <body>
        
        <div class="book"><div class="book-summary">
    <div id="search-searchbar">
    </div>
    <div class="post-list" id="search-hits">
        
      </div>
      <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
var search = instantsearch({
  appId: '3PBI3MMCBE',
  apiKey: '55d673c313b717b7386df8c9418588d4',
  indexName: 'jekyll',
  searchFunction(helper) {
    var container = document.querySelector('#search-hits');
    container.style.display = helper.state.query === '' ? 'none' : '';

    helper.search();
  }
});

var hitTemplate = function(hit) {
  let date = '';
  if (hit.date) {
    date = moment.unix(hit.date).format('MMM D, YYYY');
  }

  let url = `${hit.url}#${hit.anchor}`;

  var title = hit._highlightResult.title.value;

  var content = hit._highlightResult.html.value;

  return `
    <li class="post-item chapter">
      <a href="${url}" class="post-link">${title}</a>
      <div class="post-snippet">${content}</div>
    </li>
  `;
}


search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-searchbar',
    placeholder: 'Search the docs',
    poweredBy: true // This is required if you're on the free Community plan
  })
);

search.addWidget(
  instantsearch.widgets.hits({
    container: '#search-hits',
    templates: {
      item: hitTemplate
    }
  })
);

search.start();
</script>

<style>
.ais-search-box {
  max-width: 100%;
  margin-bottom: 15px;
}
.post-item {
  margin-bottom: 30px;
}
.post-link .ais-Highlight {
  color: #111;
  font-style: normal;
  text-decoration: underline;
}
.post-breadcrumbs {
  color: #424242;
  display: block;
}
.post-breadcrumb {
  font-size: 18px;
  color: #424242;
}
.post-breadcrumb .ais-Highlight {
  font-weight: bold;
  font-style: normal;
}
.post-snippet .ais-Highlight {
  color: #2a7ae2;
  font-style: normal;
  font-weight: bold;
}
.post-snippet img {
  display: none;
}

.post-list {
    list-style:none;
    margin:0;
    padding: 10px 15px;
    -webkit-transition:top .5s ease;
    -moz-transition:top .5s ease;
    -o-transition:top .5s ease;
    transition:top .5s ease
}

#search-hits::after {
    content: '';
    display: block;
    height: 1px;
    margin: 7px 0;
    overflow: hidden;
    background: rgba(0,0,0,.07);
}
</style>
    <nav role="navigation">
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="/">
            
                <a href="/">
                    Home
                </a>
            </li>

            <li class="divider"></li>
            
            
            
            
            

            
            
        
            
            <li class="chapter" data-level="1.1" data-path="/docs/enso/types ">
                    <a href="/docs/enso/types">
                        Go back
                    </a>
                </li>
                <li class="divider"></li>
            
                
             
            
            
            
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/">
                    
                        <a href="/docs/enso/types/">
                            
                                Enso&#39;s Type System
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/goals.html">
                    
                        <a href="/docs/enso/types/goals.html">
                            
                                Goals for the Enso Type System
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter active" data-level="1.2" data-path="/docs/enso/types/hierarchy.html">
                    
                        <a href="/docs/enso/types/hierarchy.html">
                            
                                The Enso Type Hierarchy
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/function-types.html">
                    
                        <a href="/docs/enso/types/function-types.html">
                            
                                Function Types
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/access-modifiers.html">
                    
                        <a href="/docs/enso/types/access-modifiers.html">
                            
                                Access Modifiers
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/pattern-matching.html">
                    
                        <a href="/docs/enso/types/pattern-matching.html">
                            
                                Pattern Matching
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/dynamic-dispatch.html">
                    
                        <a href="/docs/enso/types/dynamic-dispatch.html">
                            
                                Dynamic Dispatch
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/modules.html">
                    
                        <a href="/docs/enso/types/modules.html">
                            
                                Modules
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/contexts.html">
                    
                        <a href="/docs/enso/types/contexts.html">
                            
                                Monadic Contexts
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/evaluation.html">
                    
                        <a href="/docs/enso/types/evaluation.html">
                            
                                Evaluation and Typing
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/parallelism.html">
                    
                        <a href="/docs/enso/types/parallelism.html">
                            
                                Automated Parallelism Analysis
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/type-directed-programming.html">
                    
                        <a href="/docs/enso/types/type-directed-programming.html">
                            
                                Type-Directed Programming
                            
                        </a>
                    </li>
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/errors.html">
                    
                        <a href="/docs/enso/types/errors.html">
                            
                                Errors
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/inference-and-checking.html">
                    
                        <a href="/docs/enso/types/inference-and-checking.html">
                            
                                Inference and Checking
                            
                        </a>
                    </li>
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/dependent-typing.html">
                    
                        <a href="/docs/enso/types/dependent-typing.html">
                            
                                Dependent Typing
                            
                        </a>
                    </li>
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/types/references.html">
                    
                        <a href="/docs/enso/types/references.html">
                            
                                References
                            
                        </a>
                    </li>
                
            
            

            
        
        </ul>
    </nav>
</div>
<div class="book-body"><div class="body-inner">
    <div class="book-header" role="navigation">
        <!-- Title -->
        <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i>
            
                <a href="." >The Enso Type Hierarchy</a>
            
        </h1>
    </div>
    <div class="page-wrapper" tabindex="-1" role="main">
        <div class="page-inner">
            <div id="book-search-results">
                <div class="search-noresults">
                    <section class="normal markdown-section">
                        <h1 id="the-enso-type-hierarchy">The Enso Type Hierarchy</h1>

<p>Enso is a statically typed language based upon a theory of set-based typing,
what we call <code class="language-plaintext highlighter-rouge">typesets</code>. This is a novel approach, and it is key to our intent
for Enso to <em>feel</em> like a dynamic language while still bringing enhanced safety.</p>

<!-- MarkdownTOC levels="2,3" autolink="true" -->

<ul>
  <li><a href="#typeset-theory">Typeset Theory</a></li>
  <li><a href="#atoms">Atoms</a></li>
  <li><a href="#typesets">Typesets</a>
    <ul>
      <li><a href="#typeset-operators">Typeset Operators</a></li>
      <li><a href="#typeset-subsumption">Typeset Subsumption</a></li>
      <li><a href="#unsafe-typeset-field-mutation">Unsafe Typeset Field Mutation</a></li>
    </ul>
  </li>
  <li><a href="#dependent-lists">Dependent Lists</a></li>
  <li><a href="#interfaces">Interfaces</a>
    <ul>
      <li><a href="#special-interfaces">Special Interfaces</a></li>
    </ul>
  </li>
  <li><a href="#type-ascription">Type Ascription</a>
    <ul>
      <li><a href="#scoping-in-type-ascription">Scoping in Type Ascription</a></li>
    </ul>
  </li>
  <li><a href="#projections">Projections</a>
    <ul>
      <li><a href="#special-fields">Special Fields</a></li>
    </ul>
  </li>
</ul>

<!-- /MarkdownTOC -->

<h2 id="typeset-theory">Typeset Theory</h2>

<ul>
  <li>All types are denoted by a set of constructors, which represent the atomic
values of that type. We call these ‘atoms’. For example, the typeset <code class="language-plaintext highlighter-rouge">Nat</code> is
made up of the atoms <code class="language-plaintext highlighter-rouge">1, 2, 3, ...</code> and so on.</li>
  <li>Constructors are grouped into typesets.</li>
  <li>These typesets are arranged into a modular lattice:
    <ul>
      <li>The type <code class="language-plaintext highlighter-rouge">Any</code> is the typeset of all typesets.</li>
      <li>The type <code class="language-plaintext highlighter-rouge">Void</code> is the empty typeset.</li>
      <li>All atoms are typesets, but not all typesets are atoms.</li>
      <li>This lattice is ordered using the <code class="language-plaintext highlighter-rouge">&lt;:</code> subsumption judgement. For more
information please see <a href="#typeset-subsumption">typeset subsumption</a>.</li>
    </ul>
  </li>
</ul>

<p>All in all, this means that a value in Enso can have myriad different types
attributed to it, even though these may vary greatly in the level of
specificity.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">7</span> <span class="p">:</span> <span class="mi">7</span> <span class="p">:</span> <span class="no">Natural</span> <span class="p">:</span> <span class="no">Integer</span> <span class="p">:</span> <span class="no">Number</span> <span class="p">:</span> <span class="no">Any</span> <span class="p">:</span> <span class="no">Any</span> <span class="p">:</span> <span class="o">...</span>
</code></pre></div></div>

<p>A brief note on naming (for more, please see the
<a href="/docs/enso/syntax/naming.html">naming syntax</a>):</p>

<ul>
  <li>Naming in Enso is case-insensitive.</li>
  <li>In contexts where it is ambiguous as to whether the user would be referring to
a fresh name or a name already in scope, capitalisation is used to determine
which is meant.</li>
  <li>An uncapitalised identifier is assumed to be fresh, while a capitalised
identifier is assumed to be in scope.</li>
</ul>

<h2 id="atoms">Atoms</h2>

<p>Atoms are the fundamental building blocks of types in Enso, so named because
they are small units of ‘type’, but nonetheless may be separated further. In
Enso’s type hierarchy, atoms are the typesets that are unified <em>nominally</em>,
meaning that every atom has a discrete identity.</p>

<ul>
  <li>Atoms can be thought of as the ‘values’ of Enso’s type system. Formally an
atom is a product type with named fields, where the fields are polymorphic.</li>
  <li>Atoms have <em>unique identity</em>. This means that while a typeset may subsume an
atom, an atom can never be subsumed by another atom, even if it has the same
number of fields with the same names.</li>
  <li>An atom, thus, can only unify with a site expecting that atom, or some
anonymous typeset.</li>
</ul>

<p>The following are all examples of atoms with a usage example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="no">Nothing</span>
<span class="n">type</span> <span class="no">Just</span> <span class="n">value</span>
<span class="n">atom</span> <span class="no">Vec3</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
<span class="n">atom</span> <span class="no">Vec2</span> <span class="n">x</span> <span class="n">y</span>

<span class="n">v</span> <span class="o">=</span> <span class="no">V3</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="p">:</span> <span class="no">V3</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="p">:</span> <span class="no">V3</span> <span class="no">Int</span> <span class="no">Int</span> <span class="no">Int</span> <span class="p">:</span> <span class="no">V3</span> <span class="no">Any</span> <span class="no">Any</span> <span class="no">Any</span> <span class="p">:</span> <span class="no">Any</span>
</code></pre></div></div>

<h2 id="typesets">Typesets</h2>

<p>Typesets in Enso are an entity unique to Enso’s type system. They are a
fundamental recognition of types as ‘sets of values’ in Enso, and while they
share some similarities with records they are a far more general notion.</p>

<ul>
  <li>A typeset is an entity that contains one or more labels.</li>
  <li>Each label has a type, which <em>may</em> be explicitly ascribed to it.</li>
  <li>Each label may have a value provided for it.</li>
</ul>

<p>The other key notion of typesets is that typesets are matched <em>structurally</em>,
subject to the rules for nominal typing of atoms discussed above.</p>

<ul>
  <li>Typeset members are themselves typesets.</li>
  <li>A typeset member <em>must</em> have a label, but may also have a type and a value
(<code class="language-plaintext highlighter-rouge">label : Type := value</code>)</li>
  <li>An unspecified type is considered to be a free type variable.</li>
  <li>The label and the type become part of the typing judgement where present, and
will be used for unification and subsumption.</li>
</ul>

<p>Typesets themselves can be declared in two ways:</p>

<ol>
  <li><strong>Anonymous:</strong> An anonymous typeset can be declared using the curly-braces
syntax <code class="language-plaintext highlighter-rouge">{}</code>. Such a definition must contain zero or more typeset fields (see
above). Please note that <code class="language-plaintext highlighter-rouge">{}</code> is necessary as it needs to delimit a pattern
context.</li>
  <li><strong>Atoms:</strong> An atom definition declares a typeset with a discrete identity,
using atom definition syntax. Atom fields must only be names.</li>
  <li><strong>Concatenation:</strong> Combining two typeset values using <code class="language-plaintext highlighter-rouge">;</code>.</li>
</ol>

<p>Typesets can be combined using the <a href="#typeset-operators">typeset operators</a>
defined below.</p>

<p>In addition, we provide syntactic sugar for defining typesets as described in
the syntax document. This syntax has a special desugaring that obeys the
following rules:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="no">Maybe</span> <span class="n">a</span>
    <span class="no">Nothing</span>
    <span class="n">type</span> <span class="no">Just</span> <span class="p">(</span><span class="n">value</span> <span class="p">:</span> <span class="n">a</span><span class="p">)</span>

    <span class="n">isJust</span> <span class="o">=</span> <span class="k">case</span> <span class="n">this</span> <span class="n">of</span>
        <span class="no">Nothing</span> <span class="o">-&gt;</span> <span class="no">False</span>
        <span class="no">Just</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="no">True</span>

    <span class="n">nothing</span> <span class="o">=</span> <span class="n">not</span> <span class="n">isJust</span>
</code></pre></div></div>

<p>Becomes</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">atom</span> <span class="no">Just</span> <span class="n">value</span>
<span class="n">maybe</span> <span class="n">a</span> <span class="o">=</span>
  <span class="p">{</span> <span class="p">(</span><span class="no">Nothing</span> <span class="o">|</span> <span class="no">Just</span> <span class="n">a</span><span class="p">),</span> <span class="ss">isJust: </span><span class="no">IsJust</span> <span class="o">=</span> <span class="n">isJust</span><span class="p">,</span> <span class="n">nothing</span> <span class="p">:</span> <span class="no">Nothing</span> <span class="o">=</span> <span class="n">nothing</span> <span class="p">}</span>

<span class="no">Nothing</span><span class="p">.</span><span class="nf">isJust</span> <span class="p">:</span> <span class="no">Maybe</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="no">Bool</span>
<span class="no">Nothing</span><span class="p">.</span><span class="nf">isJust</span> <span class="n">this</span> <span class="o">=</span> <span class="k">case</span> <span class="n">this</span> <span class="n">of</span>
  <span class="no">Nothing</span> <span class="o">-&gt;</span> <span class="no">False</span>
  <span class="no">Just</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="no">True</span>

<span class="no">Just</span><span class="p">.</span><span class="nf">isJust</span> <span class="p">:</span> <span class="no">Maybe</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="no">Bool</span>
<span class="no">Just</span><span class="p">.</span><span class="nf">isJust</span> <span class="n">this</span> <span class="o">=</span> <span class="k">case</span> <span class="n">this</span> <span class="n">of</span>
  <span class="no">Nothing</span> <span class="o">-&gt;</span> <span class="no">False</span>
  <span class="no">Just</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="no">True</span>

<span class="no">Nothing</span><span class="p">.</span><span class="nf">nothing</span> <span class="p">:</span> <span class="no">Maybe</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="no">Bool</span>
<span class="no">Nothing</span><span class="p">.</span><span class="nf">nothing</span> <span class="o">=</span> <span class="n">not</span> <span class="n">isJust</span>

<span class="no">Just</span><span class="p">.</span><span class="nf">nothing</span> <span class="p">:</span> <span class="no">Maybe</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="no">Bool</span>
<span class="no">Just</span><span class="p">.</span><span class="nf">nothing</span> <span class="o">=</span> <span class="n">not</span> <span class="n">isJust</span>
</code></pre></div></div>

<blockquote>
  <p>The actionables for this section are as follows:</p>

  <ul>
    <li>Simplify this definition if we decide <em>not</em> to support multiple dispatch.</li>
    <li>Determine how duplicate labels should work, and if it should work.</li>
    <li>Note that because things desugar to functions we can place arbitrary
constraints on initialisation (partial type constructors style).</li>
  </ul>
</blockquote>

<h3 id="typeset-operators">Typeset Operators</h3>

<p>Enso defines a set of operations on typesets that can be used to combine and
manipulate them. Any use of these operators introduces typing evidence which may
later be discharged through pattern matching.</p>

<p>They are as follows:</p>

<ul>
  <li><strong>Type Ascription - <code class="language-plaintext highlighter-rouge">:</code>:</strong> This operator ascribes the type given by its right
operand to the expression of its left operand.</li>
  <li><strong>Context Ascription - <code class="language-plaintext highlighter-rouge">in</code>:</strong> This operator ascribes the monadic context
given by its right operand to the expression of its left operand.</li>
  <li><strong>Error Ascription - <code class="language-plaintext highlighter-rouge">!</code>:</strong> This operator combines the type of its left
operand with the error type of its right. This is <em>effectively</em> an <code class="language-plaintext highlighter-rouge">Either</code>,
but with <code class="language-plaintext highlighter-rouge">Left</code> and <code class="language-plaintext highlighter-rouge">Right</code> reversed, and integrates with the inbuilt
mechanism for <a href="/docs/enso/semantics/errors.html#broken-values">broken values</a>.</li>
  <li><strong>Function - <code class="language-plaintext highlighter-rouge">-&gt;</code>:</strong> This operator defines a mapping from one expression to
another.</li>
  <li><strong>Subsumption - <code class="language-plaintext highlighter-rouge">&lt;:</code>:</strong> This operator asserts that the left hand operand is
<em>structurally subsumed</em> by the right-hand operand. For more details on this
relationship, see <a href="#typeset-subsumption">typeset subsumption</a> below.</li>
  <li><strong>Equality - <code class="language-plaintext highlighter-rouge">~</code>:</strong> This operator asserts that the left and right operands are
structurally equal.</li>
  <li><strong>Concatenation - <code class="language-plaintext highlighter-rouge">;</code>:</strong> This operator combines multiple typesets, expressing
product types.</li>
  <li><strong>Union - <code class="language-plaintext highlighter-rouge">|</code>:</strong> This operator creates a typeset that contains the members in
the union of its operands.</li>
  <li><strong>Intersection - <code class="language-plaintext highlighter-rouge">|</code>:</strong> This operator creates a typeset that contains the
members in the intersection of its operands.</li>
  <li><strong>Subtraction - <code class="language-plaintext highlighter-rouge">\</code>:</strong> This operator creates a typeset that contains all of
the members in the left operand that do not occur in the right operand.</li>
</ul>

<p>For information on the syntactic usage of these operators, please see the
section on <a href="#../syntax/types.md#type-operators">type operators</a> in the syntax
design documentation.</p>

<blockquote>
  <p>The actionables for this section are:</p>

  <ul>
    <li>When necessary, we need to <em>explicitly formalise</em> the semantics of all of
these operators.</li>
    <li>When do applications of these constructors create matchable (injective and
generative) types?</li>
    <li>Are <code class="language-plaintext highlighter-rouge">&lt;:</code> and <code class="language-plaintext highlighter-rouge">:</code> equivalent in the surface syntax?</li>
  </ul>
</blockquote>

<h3 id="typeset-subsumption">Typeset Subsumption</h3>

<p>For two typesets <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code>, <code class="language-plaintext highlighter-rouge">a</code> is said to be subsumed by <code class="language-plaintext highlighter-rouge">b</code> (written using
the notation <code class="language-plaintext highlighter-rouge">a &lt;: b</code>) if the following hold recursively. This can be thought of
as a ‘can behave as’ relation.</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">a</code> contains a subset of the labels in <code class="language-plaintext highlighter-rouge">b</code>. It should be noted that <code class="language-plaintext highlighter-rouge">a</code> is
not <em>limited to</em> being a subset of the labels in <code class="language-plaintext highlighter-rouge">b</code>.</li>
  <li>
    <p>For each label in <code class="language-plaintext highlighter-rouge">a</code>, the type of that label <code class="language-plaintext highlighter-rouge">t</code> is subsumed by the type
<code class="language-plaintext highlighter-rouge">q</code> of the corresponding label in <code class="language-plaintext highlighter-rouge">b</code>. That is, <code class="language-plaintext highlighter-rouge">t &lt;: q</code>, defined as
follows:</p>

    <ol>
      <li>If both <code class="language-plaintext highlighter-rouge">t</code> and <code class="language-plaintext highlighter-rouge">q</code> are atoms, then it holds only if <code class="language-plaintext highlighter-rouge">t</code> and <code class="language-plaintext highlighter-rouge">q</code> are the
same atom (have the same identity).</li>
      <li>If <code class="language-plaintext highlighter-rouge">t</code> is an atom, then it holds only if the fields in <code class="language-plaintext highlighter-rouge">t</code> are subsumed
by <code class="language-plaintext highlighter-rouge">q</code>.</li>
      <li>If either <code class="language-plaintext highlighter-rouge">t</code> or <code class="language-plaintext highlighter-rouge">q</code> is a function type but not <em>both</em> <code class="language-plaintext highlighter-rouge">t</code> and q are
function types, then the relation does not hold.</li>
      <li>
        <p>If both <code class="language-plaintext highlighter-rouge">t</code> and <code class="language-plaintext highlighter-rouge">q</code> are function types, then the relation holds if:</p>

        <ul>
          <li>If <code class="language-plaintext highlighter-rouge">t</code> contains defaulted arguments, not present in <code class="language-plaintext highlighter-rouge">q</code>, then these
can be ignored for the purposes of determining whether <code class="language-plaintext highlighter-rouge">t &lt;: q</code>. For
example, <code class="language-plaintext highlighter-rouge">f : a -&gt; b = x -&gt; c</code> is subsumed by <code class="language-plaintext highlighter-rouge">f : a -&gt; c</code>.</li>
          <li>For the <em>argument</em> position of both <code class="language-plaintext highlighter-rouge">t</code> and <code class="language-plaintext highlighter-rouge">q</code>, <code class="language-plaintext highlighter-rouge">t.arg &lt;: q.arg</code> (the
argument position is covariant).</li>
          <li>For the <em>return</em> position of both <code class="language-plaintext highlighter-rouge">t</code> and <code class="language-plaintext highlighter-rouge">q</code>, if it is not a function
type, then <code class="language-plaintext highlighter-rouge">t.ret &lt;: q.ret</code> (the return position is covariant). If it
is a function type then recurse.</li>
        </ul>
      </li>
      <li>If the types have constraints then the constraints must match. A
constraint is simply an application of the <code class="language-plaintext highlighter-rouge">&lt;:</code> relation.</li>
      <li>The types both have the same relevance and visibility (in the dependent
sense).</li>
    </ol>
  </li>
  <li>For any typeset <code class="language-plaintext highlighter-rouge">a</code>, the relation <code class="language-plaintext highlighter-rouge">a &lt;: Any</code> always holds, and the converse
<code class="language-plaintext highlighter-rouge">Any &lt;: a</code> never holds.</li>
  <li>For any typeset <code class="language-plaintext highlighter-rouge">a</code>, the relation <code class="language-plaintext highlighter-rouge">a &lt;: Void</code> never holds, and the converse
<code class="language-plaintext highlighter-rouge">Void &lt;: a</code> always holds.</li>
</ol>

<p>Two typesets <code class="language-plaintext highlighter-rouge">A</code> and <code class="language-plaintext highlighter-rouge">B</code> are defined to be structurally equal if <code class="language-plaintext highlighter-rouge">A &lt;: B</code> and
<code class="language-plaintext highlighter-rouge">B &lt;: A</code>.</p>

<blockquote>
  <p>The actionables for this section are as follows:</p>

  <ul>
    <li>Fix the above. It isn’t 100% correct, but should convey a general gist. Use
examples including all the operators.</li>
    <li>Ensure that co- and contra-variance are handled properly. They are a bit odd
under this theory.</li>
    <li>Do we need explicit variance annotations?</li>
    <li>How do constraints factor in?</li>
    <li>We want users not to have to think about the difference between <code class="language-plaintext highlighter-rouge">~</code>, <code class="language-plaintext highlighter-rouge">:</code> and
<code class="language-plaintext highlighter-rouge">&lt;:</code> so we need to work out if we can elide them from the surface language.
This requires considering polymorphic function arguments, partial data,
qualified function types and variable definitions.</li>
    <li>Reformulate this in terms of row polymorphism. We really want to avoid a
<em>real</em> subtyping relationship as it doesn’t play at all well with global
inference.</li>
    <li>To that end, it is an open question as to whether we can have type unions
without subtyping. Conventionally we wouldn’t be able to, but with our
theory we may.</li>
  </ul>
</blockquote>

<h3 id="unsafe-typeset-field-mutation">Unsafe Typeset Field Mutation</h3>

<p>For performance it is sometimes necessary to have the ability to <em>directly</em>
<em>mutate</em> the field of a typeset. This is most often necessary for atoms
themselves, but as atoms are typesets this also applies.</p>

<ul>
  <li>We define a method <code class="language-plaintext highlighter-rouge">setField : (field : Name) -&gt; (value : Any) -&gt; Nothing</code>
that performs in-place field mutation of the field <code class="language-plaintext highlighter-rouge">field</code> to set its value to
<code class="language-plaintext highlighter-rouge">any</code>.</li>
  <li>In order to prevent this from being used flippantly, this functionality is
marked <code class="language-plaintext highlighter-rouge">unsafe</code> (see <a href="/docs/enso/types/access-modifiers.html">access modifiers</a> for more).</li>
</ul>

<h2 id="dependent-lists">Dependent Lists</h2>

<p>The most-specific type of an Enso list is the list of the types of the list’s
elements. By way of example, the following are true:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="s2">"String"</span><span class="p">]</span> <span class="p">:</span> <span class="no">List</span> <span class="p">[</span><span class="no">Integer</span><span class="p">,</span> <span class="no">Number</span><span class="p">,</span> <span class="no">String</span><span class="p">]</span> <span class="p">:</span> <span class="no">List</span> <span class="p">[</span><span class="no">Number</span><span class="p">,</span> <span class="no">Number</span><span class="p">,</span> <span class="no">String</span><span class="p">]</span> <span class="p">:</span> <span class="o">...</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">3.0</span><span class="n">f</span><span class="p">]</span> <span class="p">:</span> <span class="no">List</span> <span class="p">[</span><span class="no">Integer</span><span class="p">,</span> <span class="no">Number</span><span class="p">,</span> <span class="no">Double</span><span class="p">]</span> <span class="p">:</span> <span class="no">List</span> <span class="p">[</span><span class="no">Number</span><span class="p">,</span> <span class="no">Real</span><span class="p">,</span> <span class="no">Real</span><span class="p">]</span> <span class="p">:</span> <span class="no">List</span> <span class="no">Number</span> <span class="p">:</span> <span class="o">...</span>
</code></pre></div></div>

<p>This means that Enso’s lists <em>fully subsume</em> the use cases for standard tuples.</p>

<h2 id="interfaces">Interfaces</h2>

<p>Because typesets can be matched <em>structurally</em>, all typesets implicitly define
interfaces. A type <code class="language-plaintext highlighter-rouge">t</code> conforming to an interface <code class="language-plaintext highlighter-rouge">i</code> in Enso is as simple as
the relation <code class="language-plaintext highlighter-rouge">i &lt;: t</code> (as in <a href="#typeset-subsumption">typeset subsumption</a>)
holding.</p>

<p>This means that types need not <em>explicitly</em> implement interfaces, which can be
thought of as a form of static duck typing. However, when defining a new type,
users may choose to explicitly state that it defines an interface. This has two
main benefits:</p>

<ul>
  <li>We can include default implementations from the interface definition.</li>
  <li>We can provide better diagnostics in the compiler as we can point to the
definition site instead of the use site.</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="no">HasName</span>
    <span class="ss">name: </span><span class="no">String</span>
    <span class="nb">name</span> <span class="o">=</span> <span class="s2">"unnamed"</span>

<span class="n">type</span> <span class="no">Vector</span> <span class="n">a</span>
    <span class="ss">this: </span><span class="no">HasName</span>
    <span class="no">V2</span> <span class="n">x</span><span class="ss">:a</span> <span class="n">y</span><span class="ss">:a</span>
    <span class="no">V3</span> <span class="n">x</span><span class="ss">:a</span> <span class="n">y</span><span class="ss">:a</span> <span class="n">z</span><span class="ss">:a</span>

<span class="nb">name</span> <span class="p">(</span><span class="n">this</span><span class="ss">:Int</span><span class="p">)</span> <span class="o">=</span> <span class="s2">"IntName"</span>

<span class="n">greet</span> <span class="p">(</span><span class="n">t</span><span class="ss">:HasName</span><span class="p">)</span> <span class="o">=</span> <span class="nb">print</span> <span class="s1">'Hi, my name is `t.name`'</span>

<span class="n">main</span> <span class="o">=</span>
    <span class="n">greet</span> <span class="p">(</span><span class="no">V3</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">greet</span> <span class="mi">8</span>
</code></pre></div></div>

<p>As an aside, it should be noted that the nature of Enso’s typesets means that it
is easy to express far more general interfaces than Haskell’s typeclasses can.</p>

<h3 id="special-interfaces">Special Interfaces</h3>

<p>In order to aid usability we include a few special interfaces in the standard
library that have special support in the compiler.</p>

<h4 id="wrapper">Wrapper</h4>

<p>In a language where composition is queen and inheritance doesn’t exist there
needs to be an easy way for users to compose typesets without having to define
wrappers for the contained types. This is a big usability bonus for Enso.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="no">Wrapper</span>
    <span class="n">wrapped</span>   <span class="p">:</span> <span class="p">(</span><span class="n">lens</span> <span class="n">s</span> <span class="n">t</span> <span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="n">this</span><span class="p">.</span><span class="nf">unwrapped</span>
    <span class="n">unwrapped</span> <span class="p">:</span> <span class="n">t</span>
    <span class="n">unwrapped</span> <span class="o">=</span> <span class="n">t</span> <span class="c1"># Default implementation based on inferred type.</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Wrapper</code> is an interface implemented implicitly for all typesets, and boils
down to delegating to the contained members if a given label is not found on the
top typeset. This delegation only occurs on the this type.</p>

<p>A usage example is as follows:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="no">HasName</span> <span class="n">a</span>
    <span class="n">this</span><span class="ss">:Wrapper</span> <span class="c1"># The field 'unwrapped' uses default implementation.</span>
    <span class="n">type</span> <span class="no">Cons</span>
        <span class="nb">name</span>    <span class="p">:</span> <span class="no">String</span>
        <span class="n">wrapped</span> <span class="p">:</span> <span class="n">a</span>

<span class="nb">test</span> <span class="n">i</span><span class="ss">:Int</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">main</span> <span class="o">=</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="no">HasName</span><span class="o">.</span><span class="no">Cons</span> <span class="s2">"Zenek"</span> <span class="mi">7</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="mi">1</span>     <span class="c1"># OK, uses `wrapped` lens.</span>
    <span class="nb">print</span> <span class="err">$</span> <span class="n">p2</span><span class="p">.</span><span class="nf">name</span> <span class="c1"># OK</span>
    <span class="nb">print</span> <span class="err">$</span> <span class="nb">test</span> <span class="n">p1</span> <span class="c1"># OK, uses `wrapped` lens.</span>
</code></pre></div></div>

<h4 id="convertible">Convertible</h4>

<p>Also useful in a language for data science is the ability to have the compiler
help you by automatically converting between types that have sensible coercions
between them. This interface is known as <code class="language-plaintext highlighter-rouge">Convertible</code>, and defines a one-way
conversion between a type <code class="language-plaintext highlighter-rouge">a</code> and a type <code class="language-plaintext highlighter-rouge">b</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Convertible</span> <span class="n">t</span>
  <span class="n">to</span> <span class="p">:</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span>
</code></pre></div></div>

<p>There are a few key points of this design that must be considered carefully:</p>

<ul>
  <li>This interface <em>only</em> applies when implemented explicitly by the type. The
compiler will not automatically generate implementations for <code class="language-plaintext highlighter-rouge">Convertible t</code>.</li>
  <li>It is very important for the conversions to be inserted automatically in the
correct place. If a conversion is required in the body of a block, the point
at which the conversion takes place should propagate outwards as far as
possible. This is very important for proper definition of controls in the GUI.</li>
  <li><code class="language-plaintext highlighter-rouge">Convertible t</code> can also be implemented by a function that accepts arguments
<em>iff</em> all of the arguments have default values associated with them. In such a
case, the GUI should display conversion controls with a checkbox that, when
checked, can be converted to an explicit conversion call.</li>
  <li>We will need some limited mechanism for doing this even without type inference
as it forms the backbone of good API design for the graphical interface. This
is because polymorphic functions are much harder to support with graphical
controls.</li>
</ul>

<p>An example use-case is as follows:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="no">Vector</span> <span class="n">a</span>
    <span class="n">type</span> <span class="no">V3</span> <span class="n">x</span><span class="ss">:a</span> <span class="n">y</span><span class="ss">:a</span> <span class="n">z</span><span class="ss">:a</span>

    <span class="n">this</span> <span class="p">:</span> <span class="no">Convertible</span> <span class="no">String</span>
    <span class="n">to</span> <span class="o">=</span> <span class="s1">'V3 `this.x` `this.y` `this.z`'</span>

    <span class="n">this</span> <span class="p">:</span> <span class="no">Convertible</span> <span class="p">(</span><span class="ss">a: </span><span class="no">Semigroup</span><span class="p">)</span>
    <span class="n">to</span> <span class="o">=</span> <span class="n">this</span><span class="p">.</span><span class="nf">x</span> <span class="o">+</span> <span class="n">this</span><span class="p">.</span><span class="nf">y</span> <span class="o">+</span> <span class="n">this</span><span class="p">.</span><span class="nf">z</span>

<span class="ss">test: </span><span class="no">Int</span> <span class="o">-&gt;</span> <span class="no">String</span>
<span class="nb">test</span> <span class="n">i</span> <span class="o">=</span> <span class="nb">print</span> <span class="s1">'I got the magic value `i`!'</span>

<span class="n">main</span> <span class="o">=</span>
    <span class="nb">test</span> <span class="mi">7</span>    <span class="c1"># OK!</span>
    <span class="nb">test</span> <span class="s1">'hi'</span> <span class="c1"># FAIL: type mismatch, no definition `Convertible Int` for String.</span>
    <span class="nb">test</span> <span class="p">(</span><span class="no">Vector</span><span class="o">.</span><span class="no">V3</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># OK, prints 'I got the magic value 6'.</span>
</code></pre></div></div>

<blockquote>
  <p>The actionables for this section are:</p>

  <ul>
    <li>Work out the semantics for working with this only for <code class="language-plaintext highlighter-rouge">this</code> in the dynamic
case.</li>
    <li>Work out how best the type system can expose the conversion so that you can
see the additional defaulted parameters and conversion types in the UI.</li>
  </ul>
</blockquote>

<h4 id="destruct">Destruct</h4>

<p>While it is a common idiom in functional languages to implement the <code class="language-plaintext highlighter-rouge">bracket</code>
pattern for acquiring and releasing resources, but this isn’t such a good fit
for a language where many users aren’t going to be used to thinking about
resources.</p>

<p>Instead, we have the final of our special traits, called <code class="language-plaintext highlighter-rouge">Destruct</code>, defined as
follows:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">type</span> <span class="no">Destruct</span>
  <span class="n">destroy</span> <span class="p">:</span> <span class="no">This</span> <span class="o">-&gt;</span> <span class="no">Nothing</span>
</code></pre></div></div>

<p>For those coming from Rust, C++, or another language which uses the RAII
principle, this should be a familiar sight. It works as follows:</p>

<ol>
  <li>All types automatically provide a trivial implementation for <code class="language-plaintext highlighter-rouge">destroy</code>. This
will recursively call the destructors of the type’s members.</li>
  <li>A type definition may provide a non-default implementation for <code class="language-plaintext highlighter-rouge">destroy</code>,
such that it implements more complex behaviour.</li>
  <li>When a type goes out of scope, its <code class="language-plaintext highlighter-rouge">destroy</code> method is called, allowing it
to clean up any resources that it owns.</li>
</ol>

<p>Initially, going out of scope will be defined as the point at which the instance
is garbage collected, while later, once we are able to perform more
sophisticated analysis, it will instead be defined as the point at which the
instance’s lexical lifetime ends.</p>

<p>It should be noted, however, that a type that implements an explicit <code class="language-plaintext highlighter-rouge">destroy</code>
method should still implement explicit methods for resource handling as lexical
lifetimes are not always sufficient (e.g. a socket that you may want to close
and re-open in the same block).</p>

<blockquote>
  <p>The actionables for this section are:</p>

  <ul>
    <li>Determine how this interacts with copying and moving.</li>
  </ul>
</blockquote>

<h2 id="type-ascription">Type Ascription</h2>

<p>Like all statically-typed programming languages, Enso provides the means for the
user to ascribe a type to a value. In Enso, this is done using the <code class="language-plaintext highlighter-rouge">:</code> operator.
An expression <code class="language-plaintext highlighter-rouge">a : b</code> says that the expression denoted by <code class="language-plaintext highlighter-rouge">a</code> has the type
denoted by the expression <code class="language-plaintext highlighter-rouge">b</code>. However, unlike in many programming languages,
the types ascribed to values in Enso are not the be-all and end-all.</p>

<ul>
  <li>
    <p>The Enso compiler is free to infer a <em>more specific</em> type than the one
provided in a type signature. If this is the case, then the actual type of the
value is the inferred type rather than the provided type.</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">17</span> <span class="p">:</span> <span class="no">Int</span> <span class="o">|</span> <span class="no">Text</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span> <span class="c1"># This is not an error</span>
</code></pre></div>    </div>
  </li>
  <li>If the Enso compiler would infer a <em>more general</em> type than the one provided
in a type signature, then the signature <em>constrains</em> the allowable type of the
value.</li>
  <li>Type signatures must be subsumed by the inferred type of the value, otherwise
the compiler will raise an error. This includes</li>
</ul>

<p>Additionally, as Enso is a dependently-typed language, the expression <code class="language-plaintext highlighter-rouge">b</code> may
contain arbitrary Enso expressions. The type-checking of such signatures is
discussed further in the section on <a href="/docs/enso/types/dependent-typing.html">dependency</a>.</p>

<h3 id="scoping-in-type-ascription">Scoping in Type Ascription</h3>

<p>Enso intends to support some form of mutual scoping between the left and right
sides of the type ascription operator. This introduces some complexity into the
typechecker but brings some significant benefits.</p>

<ul>
  <li>It is common in dependently-typed languages for the signature to balloon
significantly as you add more constraints to your program.</li>
  <li>To this end, Enso wants to support a sharing of scopes between the top-level
scope of the type signature’s right-hand-side, and the top-level scope of the
signature’s left hand side.</li>
  <li>This will allow users to move complexity <em>out</em> of the type signature and into
the body of the expression, aiding code clarity.</li>
  <li>It does, however, introduce some significant complexity around recursive
bindings in groups, and the desugaring needs to depend on combinations of
<code class="language-plaintext highlighter-rouge">&gt;&gt;=</code> and <code class="language-plaintext highlighter-rouge">fix</code>.</li>
</ul>

<h2 id="projections">Projections</h2>

<p>In order to work efficiently with typesets, we need the ability to seamlessly
access and modify (immutably) their properties. In the context of our type
theory, this functionality is known as a <em>projection</em>, in that it projects a
value from (or into) a typeset.</p>

<p>Coming from Haskell, we are well-versed with the flexibility of lenses, and more
generally <em>optics</em>. To that end, we base our projection operations on standard
theories of optics. While we <em>do</em> need to formalise this, for now we provide
examples of the expected basic usage. This only covers lenses, while in the
future we will likely want prisms and other more-advanced optics.</p>

<p>A projection is generated for each field of a typeset.</p>

<blockquote>
  <p>Actionables for this section:</p>

  <ul>
    <li>Work out whether standard optics theory with custom types is sufficient for
us. We may want to support side effects.</li>
    <li>Determine how much of the above we can support without a type-checker. There
are likely to be a lot of edge-cases, so it’s important that we make sure we
know how to get as much of it working as possible.</li>
    <li>How (if at all) do lenses differ for atoms and typesets?</li>
  </ul>
</blockquote>

<h3 id="special-fields">Special Fields</h3>

<p>We also define special projections from typesets:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">index</code>: The expression <code class="language-plaintext highlighter-rouge">t.n</code>, where <code class="language-plaintext highlighter-rouge">n</code> is of type <code class="language-plaintext highlighter-rouge">Number</code> is translated to
<code class="language-plaintext highlighter-rouge">t.index n</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">field</code>: The expression <code class="language-plaintext highlighter-rouge">t.s</code> where <code class="language-plaintext highlighter-rouge">s</code> is of type <code class="language-plaintext highlighter-rouge">Text</code> is translated to
<code class="language-plaintext highlighter-rouge">t.fieldByName s</code>.</li>
</ul>

                        
                        
                        <a href="https://github.com/enso-org/enso/blob/main/docs/enso/types/hierarchy.md">Open this doc on GitHub</a>
                        
                    </section>
                </div>

                 <!--<div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
var search = instantsearch({
  appId: '3PBI3MMCBE',
  apiKey: '55d673c313b717b7386df8c9418588d4',
  indexName: 'jekyll',
  searchFunction(helper) {
    var container = document.querySelector('#search-hits');
    container.style.display = helper.state.query === '' ? 'none' : '';

    helper.search();
  }
});

var hitTemplate = function(hit) {
  let date = '';
  if (hit.date) {
    date = moment.unix(hit.date).format('MMM D, YYYY');
  }

  let url = `${hit.url}#${hit.anchor}`;

  var title = hit._highlightResult.title.value;

  var content = hit._highlightResult.html.value;

  return `
    <li class="post-item chapter">
      <a href="${url}" class="post-link">${title}</a>
      <div class="post-snippet">${content}</div>
    </li>
  `;
}


search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-searchbar',
    placeholder: 'Search the docs',
    poweredBy: true // This is required if you're on the free Community plan
  })
);

search.addWidget(
  instantsearch.widgets.hits({
    container: '#search-hits',
    templates: {
      item: hitTemplate
    }
  })
);

search.start();
</script>

<style>
.ais-search-box {
  max-width: 100%;
  margin-bottom: 15px;
}
.post-item {
  margin-bottom: 30px;
}
.post-link .ais-Highlight {
  color: #111;
  font-style: normal;
  text-decoration: underline;
}
.post-breadcrumbs {
  color: #424242;
  display: block;
}
.post-breadcrumb {
  font-size: 18px;
  color: #424242;
}
.post-breadcrumb .ais-Highlight {
  font-weight: bold;
  font-style: normal;
}
.post-snippet .ais-Highlight {
  color: #2a7ae2;
  font-style: normal;
  font-weight: bold;
}
.post-snippet img {
  display: none;
}

.post-list {
    list-style:none;
    margin:0;
    padding: 10px 15px;
    -webkit-transition:top .5s ease;
    -moz-transition:top .5s ease;
    -o-transition:top .5s ease;
    transition:top .5s ease
}

#search-hits::after {
    content: '';
    display: block;
    height: 1px;
    margin: 7px 0;
    overflow: hidden;
    background: rgba(0,0,0,.07);
}
</style>-->
            </div>
        </div>
    </div>
</div>

                <a href="/docs/enso/types/goals.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Goals for the Enso Type System">
                    <i class="fa fa-angle-left"></i>
                </a>
                

                
                    <a href="/docs/enso/types/function-types.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Function Types">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},
            "sharing": {
                "all": ["facebook", "google", "twitter", "weibo", "instapaper"],
                "facebook": true,
                "google": false,
                "instapaper": false,
                "twitter": true,
                "vk": false,
                "weibo": false
            },
            "theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            }
        },
        "theme": "default",
        "author": "Tao He",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Enso Developer Documentation",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "docs/enso/types/hierarchy.md",
        "mtime": "",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2020-10-02 02:17:39 +0000"
    },
    "basePath": "",
    "book": {
        "language": ""
    }
});
            });
            </script>
        </div><script src="/gitbook/gitbook.js"></script>
<script src="/gitbook/theme.js"></script>

<script src="/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>

<!-- <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script> --></body>
</html>