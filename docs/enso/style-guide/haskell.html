<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>Haskell Style Guide · Enso Developer Documentation</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="The developer documentation for the Enso compiler, runtime, and IDE..
"><meta name="generator" content="Jekyll (using style of GitBook 3.2.3)"><meta name="author" content="Enso.org"><link rel="stylesheet" href="/gitbook/style.css">
<link rel="stylesheet" href="/gitbook/gitbook-plugin-fontsettings/website.css">
<!-- <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css"> -->

<link rel="stylesheet" href="/gitbook/rouge-highlight-colorful.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/gitbook/images/apple-touch-icon-precomposed-152.png">
<link rel="shortcut icon" href="/gitbook/images/favicon.ico" type="image/x-icon">
        

        
        


        
        
        

        
        
        

        
            <link rel="prev" href="/docs/enso/style-guide/rust.html" />
        

        
            <link rel="next" href="/docs/enso/style-guide/markdown.html" />
        
    </head>
    <body>
        
        <div class="book"><div class="book-summary">
    <div id="search-searchbar">
    </div>
    <div class="post-list" id="search-hits">
        
      </div>
      <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
var search = instantsearch({
  appId: '3PBI3MMCBE',
  apiKey: '55d673c313b717b7386df8c9418588d4',
  indexName: 'jekyll',
  searchFunction(helper) {
    var container = document.querySelector('#search-hits');
    container.style.display = helper.state.query === '' ? 'none' : '';

    helper.search();
  }
});

var hitTemplate = function(hit) {
  let date = '';
  if (hit.date) {
    date = moment.unix(hit.date).format('MMM D, YYYY');
  }

  let url = `${hit.url}#${hit.anchor}`;

  var title = hit._highlightResult.title.value;

  var content = hit._highlightResult.html.value;

  return `
    <li class="post-item chapter">
      <a href="${url}" class="post-link">${title}</a>
      <div class="post-snippet">${content}</div>
    </li>
  `;
}


search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-searchbar',
    placeholder: 'Search the docs',
    poweredBy: true // This is required if you're on the free Community plan
  })
);

search.addWidget(
  instantsearch.widgets.hits({
    container: '#search-hits',
    templates: {
      item: hitTemplate
    }
  })
);

search.start();
</script>

<style>
.ais-search-box {
  max-width: 100%;
  margin-bottom: 15px;
}
.post-item {
  margin-bottom: 30px;
}
.post-link .ais-Highlight {
  color: #111;
  font-style: normal;
  text-decoration: underline;
}
.post-breadcrumbs {
  color: #424242;
  display: block;
}
.post-breadcrumb {
  font-size: 18px;
  color: #424242;
}
.post-breadcrumb .ais-Highlight {
  font-weight: bold;
  font-style: normal;
}
.post-snippet .ais-Highlight {
  color: #2a7ae2;
  font-style: normal;
  font-weight: bold;
}
.post-snippet img {
  display: none;
}

.post-list {
    list-style:none;
    margin:0;
    padding: 10px 15px;
    -webkit-transition:top .5s ease;
    -moz-transition:top .5s ease;
    -o-transition:top .5s ease;
    transition:top .5s ease
}

#search-hits::after {
    content: '';
    display: block;
    height: 1px;
    margin: 7px 0;
    overflow: hidden;
    background: rgba(0,0,0,.07);
}
</style>
    <nav role="navigation">
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="/">
            
                <a href="/">
                    Home
                </a>
            </li>

            <li class="divider"></li>
            
            
            
            
            

            
            
        
            
            <li class="chapter" data-level="1.1" data-path="/docs/enso/style-guide ">
                    <a href="/docs/enso/style-guide">
                        Go back
                    </a>
                </li>
                <li class="divider"></li>
            
                
             
            
            
            
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/style-guide/">
                    
                        <a href="/docs/enso/style-guide/">
                            
                                Enso Developer Style Guides
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/style-guide/scala.html">
                    
                        <a href="/docs/enso/style-guide/scala.html">
                            
                                Scala Style Guide
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/style-guide/java.html">
                    
                        <a href="/docs/enso/style-guide/java.html">
                            
                                Java Style Guide
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/style-guide/rust.html">
                    
                        <a href="/docs/enso/style-guide/rust.html">
                            
                                Rust Style Guide
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter active" data-level="1.2" data-path="/docs/enso/style-guide/haskell.html">
                    
                        <a href="/docs/enso/style-guide/haskell.html">
                            
                                Haskell Style Guide
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/style-guide/markdown.html">
                    
                        <a href="/docs/enso/style-guide/markdown.html">
                            
                                Markdown Style Guide
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
                    
                    <li class="chapter" data-level="1.1" data-path="/docs/enso/style-guide/yaml.html">
                    
                        <a href="/docs/enso/style-guide/yaml.html">
                            
                                YAML Style Guide
                            
                        </a>
                    </li>
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            
            
                
            
            

            
        
        </ul>
    </nav>
</div>
<div class="book-body"><div class="body-inner">
    <div class="book-header" role="navigation">
        <!-- Title -->
        <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i>
            
                <a href="." >Haskell Style Guide</a>
            
        </h1>
    </div>
    <div class="page-wrapper" tabindex="-1" role="main">
        <div class="page-inner">
            <div id="book-search-results">
                <div class="search-noresults">
                    <section class="normal markdown-section">
                        <h1 id="haskell-style-guide">Haskell Style Guide</h1>

<p>Like many style guides, this Haskell style guide exists for two primary reasons.
The first is to provide guidelines that result in a consistent code style across
all of the Enso codebases, while the second is to guide people towards a style
that is expressive while still easy to read and understand.</p>

<p>In general, it aims to create a set of ‘zero-thought’ rules in order to ease the
programmer burden; there is usually only <em>one way</em> to lay out code correctly.</p>

<!-- MarkdownTOC levels="2,3" autolink="true" -->

<ul>
  <li><a href="#code-formatting">Code Formatting</a>
    <ul>
      <li><a href="#whitespace">Whitespace</a></li>
      <li><a href="#line-wrapping">Line Wrapping</a></li>
      <li><a href="#alignment">Alignment</a></li>
      <li><a href="#naming">Naming</a></li>
      <li><a href="#imports">Imports</a></li>
      <li><a href="#exports">Exports</a></li>
      <li><a href="#section-headers">Section Headers</a></li>
      <li><a href="#auto-formatting">Auto-Formatting</a></li>
    </ul>
  </li>
  <li><a href="#commenting">Commenting</a>
    <ul>
      <li><a href="#documentation-comments">Documentation Comments</a></li>
      <li><a href="#source-notes">Source Notes</a></li>
      <li><a href="#todo-comments">TODO Comments</a></li>
      <li><a href="#other-comment-usage">Other Comment Usage</a></li>
    </ul>
  </li>
  <li><a href="#program-design">Program Design</a>
    <ul>
      <li><a href="#libraries">Libraries</a></li>
      <li><a href="#modules">Modules</a></li>
      <li><a href="#data-declarations">Data Declarations</a></li>
      <li><a href="#testing-and-benchmarking">Testing and Benchmarking</a></li>
      <li><a href="#warnings-and-lints">Warnings, and Lints</a></li>
    </ul>
  </li>
  <li><a href="#language-extensions">Language Extensions</a>
    <ul>
      <li><a href="#default-extensions">Default Extensions</a></li>
      <li><a href="#allowed-extensions">Allowed Extensions</a></li>
      <li><a href="#allowed-with-care">Allowed With Care</a></li>
      <li><a href="#disallowed-extensions">Disallowed Extensions</a></li>
    </ul>
  </li>
</ul>

<!-- /MarkdownTOC -->

<h2 id="code-formatting">Code Formatting</h2>

<p>This section explains the rules for visually laying out your code. They provide
a robust set of guidelines for creating a consistent visual to the code.</p>

<h3 id="whitespace">Whitespace</h3>

<p>The rules for whitespace in the Enso codebases are relatively simple:</p>

<ul>
  <li>4 spaces are used for indentation, with no tabs.</li>
  <li>There should not be any trailing whitespace.</li>
  <li>There should be no spurious whitespace within the lines, unless it is used for
<a href="#alignment">alignment</a> as discussed below.</li>
</ul>

<h3 id="line-wrapping">Line Wrapping</h3>

<p>In order to provide visual consistency across our codebases, and also to
contribute to making our code easier to scan, we enforce that all code should be
wrapped to 80 characters width at a maximum.</p>

<p>The nature of Haskell, however, means that it can sometimes be unclear where to
break lines. We use the following guidelines:</p>

<ul>
  <li>Wrap all lines to a maximum length of 80 characters.</li>
  <li>
    <p>Break the lines on operators where possible, rather than wrapping function
arguments.</p>

    <div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- This</span>
<span class="n">foo</span> <span class="o">&lt;-</span> <span class="n">veryLongFunction1</span> <span class="n">veryLongArgument1</span>
    <span class="o">$</span> <span class="n">veryLongFunction2</span> <span class="n">veryLongArgument2</span> <span class="n">veryLongArgument3</span>

<span class="c1">-- Not this</span>
<span class="n">foo</span> <span class="o">&lt;-</span> <span class="n">veryLongFunction1</span> <span class="n">veryLongArgument1</span> <span class="o">$</span> <span class="n">veryLongFunction2</span>
    <span class="n">veryLongArgument2</span> <span class="n">veryLongArgument3</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>When you have a choice of operators on which you could break, choose the one
with the highest precedence. We find that this makes code significantly more
readable.</p>

    <div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- This</span>
<span class="n">potentialPkgRoot</span> <span class="o">&lt;-</span> <span class="n">liftIO</span> <span class="o">$</span> <span class="kt">Directory</span><span class="o">.</span><span class="n">canonicalizePath</span>
    <span class="o">=&lt;&lt;</span> <span class="p">(</span><span class="n">canPath</span> <span class="o">&lt;/&gt;</span><span class="p">)</span> <span class="o">&lt;$&gt;</span> <span class="n">pkgRootFromExe</span> <span class="o">@</span><span class="n">a</span>

<span class="c1">-- Not this</span>
<span class="n">potentialPkgRoot</span> <span class="o">&lt;-</span> <span class="n">liftIO</span> <span class="o">$</span> <span class="kt">Directory</span><span class="o">.</span><span class="n">canonicalizePath</span> <span class="o">=&lt;&lt;</span> <span class="p">(</span><span class="n">canPath</span> <span class="o">&lt;/&gt;</span><span class="p">)</span>
    <span class="o">&lt;$&gt;</span> <span class="n">pkgRootFromExe</span> <span class="o">@</span><span class="n">a</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Wrap operators to the <em>start</em> of the line, rather than leaving them trailing
on a line.</p>

    <div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- This</span>
<span class="n">foo</span> <span class="o">&lt;-</span> <span class="n">veryLongFunction1</span> <span class="n">veryLongArgument1</span>
    <span class="o">$</span> <span class="n">veryLongFunction2</span> <span class="n">veryLongArgument2</span> <span class="n">veryLongArgument3</span>

<span class="c1">-- Not this</span>
<span class="n">foo</span> <span class="o">&lt;-</span> <span class="n">veryLongFunction1</span> <span class="n">veryLongArgument1</span> <span class="o">$</span>
    <span class="n">veryLongFunction2</span> <span class="n">veryLongArgument2</span> <span class="n">veryLongArgument3</span>
</code></pre></div>    </div>
  </li>
  <li>Function signatures should wrap on the <code class="language-plaintext highlighter-rouge">=&gt;</code> and <code class="language-plaintext highlighter-rouge">-&gt;</code>, and in the context of a
doc comment should have each argument on a separate line.</li>
  <li>
    <p>Lists (and all list-like constructs e.g. constraint tuples, import lists)
should be wrapped with a <em>leading</em> comma, aligned with the opening bracket,
and a space between the opening bracket and the first item. This is also used
in record declarations.</p>

    <div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- This</span>
<span class="n">myFunctionWithAVeryLongName</span> <span class="o">::</span> <span class="n">forall</span> <span class="n">a</span> <span class="n">m</span> <span class="o">.</span> <span class="p">(</span> <span class="kt">SomeConstraintOnA</span> <span class="n">a</span>
                                            <span class="p">,</span> <span class="kt">SomeMonadConstraint</span> <span class="n">m</span> <span class="p">)</span>
    <span class="o">=&gt;</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="kt">SomeOtherType</span> <span class="o">-&gt;</span> <span class="n">m</span> <span class="n">a</span>

<span class="c1">-- Not this</span>
<span class="n">myFunctionWithAVeryLongName</span> <span class="o">::</span> <span class="n">forall</span> <span class="n">a</span> <span class="n">m</span> <span class="o">.</span> <span class="p">(</span><span class="kt">SomeConstraintOnA</span> <span class="n">a</span><span class="p">,</span>
                                            <span class="kt">SomeMonadConstraint</span> <span class="n">m</span><span class="p">)</span>
    <span class="o">=&gt;</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="kt">SomeOtherType</span> <span class="o">-&gt;</span> <span class="n">m</span> <span class="n">a</span>
</code></pre></div>    </div>
  </li>
  <li>If all else fails, wrap the lines using your best effort (usually what you
find to be most readable). This may result in discussion during code review,
but will provide a learning experience to augment this guide with more
examples.</li>
</ul>

<p>Please <em>do not</em> shorten sensible names in order to make things fit into a single
line. We would much prefer that the code wraps to two lines and that naming
remains intelligible than names become so shortened as to be useless.</p>

<h3 id="alignment">Alignment</h3>

<p>When there are multiple lines that are visually similar, we try to align the
similar portions of the lines vertically.</p>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">people</span>   <span class="o">&lt;-</span> <span class="n">getAllPeople</span> <span class="o">&lt;$&gt;</span> <span class="n">worlds</span>
<span class="n">names</span>    <span class="o">&lt;-</span> <span class="n">getName</span>      <span class="o">&lt;$&gt;</span> <span class="n">people</span>
<span class="n">surnames</span> <span class="o">&lt;-</span> <span class="n">getSurnames</span>  <span class="o">&lt;$&gt;</span> <span class="n">names</span>
</code></pre></div></div>

<p>This should <em>only</em> be done when the lines don’t need to be wrapped. If you have
lines long enough that this visual justification would cause them to wrap, you
should prefer to <em>not</em> wrap the lines and forego the visual alignment.</p>

<p>Furthermore, if you have to wrap a visually similar line such that it now spans
multiple lines, it <em>no longer counts</em> as visually similar, and hence subsequent
lines should not be aligned with it.</p>

<h3 id="naming">Naming</h3>

<p>Enso has some fairly simple general naming conventions, though the sections
below may provide more rules for use in specific cases.</p>

<ul>
  <li>Types are written using <code class="language-plaintext highlighter-rouge">UpperCamelCase</code>.</li>
  <li>Variables and function names are written using <code class="language-plaintext highlighter-rouge">camelCase</code>.</li>
  <li>If a name contains an initialism or acronym, all parts of that initialism
should be of the same case: <code class="language-plaintext highlighter-rouge">httpRequest</code> or <code class="language-plaintext highlighter-rouge">makeHTTPRequest</code>.</li>
  <li>Short variable names such as <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code> should only be used in contexts where
there is no other appropriate name (e.g. <code class="language-plaintext highlighter-rouge">flip (a, b) = (b, a)</code>). They should
<em>never</em> be used to refer to temporary data in a <code class="language-plaintext highlighter-rouge">where</code> or <code class="language-plaintext highlighter-rouge">let</code> expression.</li>
  <li>Any function that performs an unsafe operation that is not documented in its
type (e.g. <code class="language-plaintext highlighter-rouge">head : [a] -&gt; a</code>, which fails if the list is empty), must be named
using the word ‘unsafe’ (e.g. <code class="language-plaintext highlighter-rouge">unsafeHead</code>). For more information on unsafe
function usage, see the section on <a href="#safety">safety</a>. The one exception to
this rule is for functions which fail intentionally on a broken implementation
(e.g. “should not happen”-style fatal crashes).</li>
  <li>Naming should use American English spelling.</li>
</ul>

<h3 id="imports">Imports</h3>

<p>Organising imports properly means that it’s easy to find the provenance of a
given function even in the absence of IDE-style tooling. We organise our imports
in four sections, each of which may be omitted if empty.</p>

<ol>
  <li><strong>Re-Exports:</strong> These are the modules that are to be re-exported from the
current module. We import these qualified under a name <code class="language-plaintext highlighter-rouge">X</code> (for export), and
then re-export these in the module header (see below for an example).</li>
  <li><strong>Preludes:</strong> As we recommend the use of <code class="language-plaintext highlighter-rouge">-XNoImplicitPrelude</code>, we then
explicitly import the prelude in use. This is almost always going to be
<code class="language-plaintext highlighter-rouge">Prologue</code> as described in the section on <a href="#libraries">libraries</a> below.</li>
  <li><strong>Qualified Imports:</strong> A list of all modules imported qualified. The <code class="language-plaintext highlighter-rouge">as</code>
portion of the import expressions should be vertically aligned.</li>
  <li><strong>Unqualified Imports:</strong> These must <em>always</em> have an explicit import list.
There are <em>no</em> circumstances under which we allow a truly unqualified import.
The import lists should be vertically aligned.</li>
</ol>

<p>Imports within each section should be listed in alphabetical order, and should
be vertically aligned.</p>

<p>When we have a module that exports a type the same as its name, we import the
module qualified as its name, but we <em>also</em> import the primary type from the
module unqualified. This can be seen with <code class="language-plaintext highlighter-rouge">Map</code> in the examples below.</p>

<p>This example is for a module that re-exports some names:</p>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">module</span> <span class="nn">Enso.MyModule</span> <span class="p">(</span><span class="nf">module</span> <span class="kt">Enso</span><span class="o">.</span><span class="kt">MyModule</span><span class="p">,</span> <span class="nf">module</span> <span class="kt">X</span><span class="p">)</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Enso.MyModule.Class</span> <span class="k">as</span> <span class="n">X</span> <span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span>

<span class="kr">import</span> <span class="nn">Prologue</span>

<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Control.Monad.State</span> <span class="k">as</span> <span class="n">State</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Data.Map</span>            <span class="k">as</span> <span class="n">Map</span>

<span class="kr">import</span> <span class="nn">Data.Map</span>  <span class="p">(</span><span class="kt">Map</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Rectangle</span> <span class="p">(</span><span class="kt">Rectangle</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Vector</span>    <span class="p">(</span><span class="kt">Vector</span> <span class="p">(</span><span class="kt">Vector</span><span class="p">),</span> <span class="nf">test</span><span class="p">)</span>
</code></pre></div></div>

<p>However, in the context where your module doesn’t re-export anything, you can
use the simplified form:</p>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">module</span> <span class="nn">Enso.MyModule</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Prologue</span>

<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Control.Monad.State</span> <span class="k">as</span> <span class="n">State</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Data.Map</span>            <span class="k">as</span> <span class="n">Map</span>

<span class="kr">import</span> <span class="nn">Data.Map</span>  <span class="p">(</span><span class="kt">Map</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Rectangle</span> <span class="p">(</span><span class="kt">Rectangle</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Vector</span>    <span class="p">(</span><span class="kt">Vector</span> <span class="p">(</span><span class="kt">Vector</span><span class="p">),</span> <span class="nf">test</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="exports">Exports</h3>

<p>There is nothing more frustrating than having a need to use a function in a
module that hasn’t been exported. To that end, we do not allow for restricted
export lists in our modules.</p>

<p>Instead, if you want to indicate that something is for internal use, you need to
define it in an internal module. For a module named <code class="language-plaintext highlighter-rouge">Enso.MyModule</code>, we can
define internal functions and data-types in <code class="language-plaintext highlighter-rouge">Enso.MyModule.Internal</code>. This means
that these functions can be imported by clients of the API if they need to, but
that we provide no guarantees about API stability when using those functions.</p>

<h3 id="section-headers">Section Headers</h3>

<p>In order to visually break up the code for easier ‘visual grepping’, we organise
it using section headers. These allow us to easily find the section that we are
looking for, even in a large file.</p>

<p>For each type defined in a file, it can be broken into sections as follows:</p>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--------------------</span>
<span class="c1">-- === MyType === --</span>
<span class="c1">--------------------</span>

<span class="c1">-- === Definition === --</span>
<span class="cm">{- The definition of the type goes here -}</span>


<span class="c1">-- === API === --</span>
<span class="cm">{- The API of the type goes here -}</span>


<span class="c1">-- === Instances === --</span>
<span class="cm">{- Any instances for the type go here -}</span>

</code></pre></div></div>

<p>The section header must be preceded by three blank lines, while the subsection
headers (except the first) should be preceded by two blank lines. Any of these
subsections may be omitted if they don’t exist, and a file may contain multiple
of these sections as relevant.</p>

<h3 id="auto-formatting">Auto-Formatting</h3>

<p>While we have attempted to use haskell auto-formatters to enforce many of the
above stylistic choices in this document, none have been found to be flexible
enough for our needs. However, as tools evolve or new ones emerge, we are open
to revisiting this decision; if you know of a tool that would let us automate
the above stylistic rules, then please speak up.</p>

<h2 id="commenting">Commenting</h2>

<p>Comments in code are a tricky area to get right as we have found that comments
often expire quickly, and in absence of a way to validate them, remain incorrect
for long periods of time. In order to best deal with this problem, we make the
keeping of comments up-to-date into an integral part of our programming practice
while also limiting the types and kinds of comments we allow.</p>

<p>Comments across the Enso codebases fall into three main types:</p>

<ul>
  <li><strong>Documentation Comments:</strong> API documentation for all language constructs that
can have it (functions, typeclasses, and so on).</li>
  <li><strong>Source Notes:</strong> Detailed explorations of design reasoning that avoid
cluttering the code itself.</li>
  <li><strong>Tasks:</strong> Things that need doing or fixing in the codebase.</li>
</ul>

<p>When we write comments, we try to follow one general guideline. A comment should
explain <em>what</em> and <em>why</em>, without mentioning <em>how</em>. The <em>how</em> should be
self-explanatory from reading the code, and if you find that it is not, that is
a sign that the code in question needs refactoring.</p>

<p>Code should be written in such a way that it guides you over what it does, and
comments should not be used as a crutch for badly-designed code.</p>

<h3 id="documentation-comments">Documentation Comments</h3>

<p>One of the primary forms of comment that we allow across the Enso codebases is
the doc comment. Every language construct that can have an associated doc
comment should do so. These are intended to be consumed by users of the API, and
use the standard Haddock syntax. Doc comments should:</p>

<ul>
  <li>Provide a short one-line explanation of the object being documented.</li>
  <li>Provide a longer description of the object, including examples where relevant.</li>
  <li>Explain the arguments to a function where relevant.</li>
</ul>

<p>They should not reference internal implementation details, or be used to explain
choices made in the function’s implementation. See <a href="#source-notes">Source Notes</a>
below for how to indicate that kind of information.</p>

<h3 id="source-notes">Source Notes</h3>

<p>Source Notes is a mechanism for moving detailed design information about a piece
of code out of the code itself. In doing so, it retains the key information
about the design while not impeding the flow of the code.</p>

<p>Source notes are detailed comments that, like all comments, explain both the
<em>what</em> and the <em>why</em> of the code being described. In very rare cases, it may
include some <em>how</em>, but only to refer to why a particular method was chosen to
achieve the goals in question.</p>

<p>A source note comment is broken into two parts:</p>

<ol>
  <li><strong>Referrer:</strong> This is a small comment left at the point where the explanation
is relevant. It takes the following form: <code class="language-plaintext highlighter-rouge">-- Note [Note Name]</code>, where
<code class="language-plaintext highlighter-rouge">Note Name</code> is a unique identifier across the codebase. These names should be
descriptive, and make sure you search for it before using it, in case it is
already in use.</li>
  <li><strong>Source Note:</strong> This is the comment itself, which is a large block comment
placed after the first function in which it is referred to in the module. It
uses the haskell block-comment syntax <code class="language-plaintext highlighter-rouge">{- ... -}</code>, and the first line names
the note using the same referrer as above: <code class="language-plaintext highlighter-rouge">{- Note [Note Name]</code>. The name(s)
in the note are underlined using a string of the <code class="language-plaintext highlighter-rouge">~</code> (tilde) character.</li>
</ol>

<p>A source note may contain sections within it where necessary. These are titled
using the following syntax: <code class="language-plaintext highlighter-rouge">== Note [Note Name (Section Name)]</code>, and can be
referred to from a referrer much as the main source note can be.</p>

<p>Sometimes it is necessary to reference a source note in another module, but this
should never be done in-line. Instead, a piece of code should reference a source
note in the same module that references the other note while providing
additional context.</p>

<p>An example, taken from the GHC codebase, can be seen below.</p>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">prepareRhs</span> <span class="o">::</span> <span class="kt">SimplEnv</span> <span class="o">-&gt;</span> <span class="kt">OutExpr</span> <span class="o">-&gt;</span> <span class="kt">SimplM</span> <span class="p">(</span><span class="kt">SimplEnv</span><span class="p">,</span> <span class="kt">OutExpr</span><span class="p">)</span>
<span class="c1">-- Adds new floats to the env iff that allows us to return a good RHS</span>
<span class="n">prepareRhs</span> <span class="n">env</span> <span class="p">(</span><span class="kt">Cast</span> <span class="n">rhs</span> <span class="n">co</span><span class="p">)</span>    <span class="c1">-- Note [Float Coercions]</span>
  <span class="o">|</span> <span class="p">(</span><span class="n">ty1</span><span class="p">,</span> <span class="n">_ty2</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="n">coercionKind</span> <span class="n">co</span>      <span class="c1">-- Do *not* do this if rhs is unlifted</span>
  <span class="p">,</span> <span class="n">not</span> <span class="p">(</span><span class="n">isUnLiftedType</span> <span class="n">ty1</span><span class="p">)</span>            <span class="c1">-- seUnsae Note [Float Coercions (Unlifted)]</span>
  <span class="o">=</span> <span class="kr">do</span>  <span class="p">{</span> <span class="p">(</span><span class="n">env'</span><span class="p">,</span> <span class="n">rhs'</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="n">makeTrivial</span> <span class="n">env</span> <span class="n">rhs</span>
        <span class="p">;</span> <span class="n">return</span> <span class="p">(</span><span class="n">env'</span><span class="p">,</span> <span class="kt">Cast</span> <span class="n">rhs'</span> <span class="n">co</span><span class="p">)</span> <span class="p">}</span>

        <span class="o">...</span><span class="n">more</span> <span class="n">equations</span> <span class="n">for</span> <span class="n">prepareRhs</span><span class="o">....</span>

<span class="cm">{- Note [Float Coercions]
~~~~~~~~~~~~~~~~~~~~~~~~~
When we find the binding
        x = e `cast` co
we'd like to transform it to
        x' = e
        x = x `cast` co         -- A trivial binding
There's a chance that e will be a constructor application or function, or
something like that, so moving the coercion to the usage site may well cancel
the coercions and lead to further optimisation.
        ...more stuff about coercion floating...

== Note [Float Coercions (Unlifted)]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ...explanations of floating for unlifted types...
-}</span>
</code></pre></div></div>

<p>A source note like this is useful whenever you have design decisions to explain,
but can also be used for:</p>

<ul>
  <li><strong>Formulae and Algorithms:</strong> If your code makes use of a mathematical formula,
or algorithm, it should note where the design element came from, preferably
with a link.</li>
  <li><strong>Safety:</strong> Sometimes it is necessary to use an unsafe API in a context where
it is trivially made safe. You should always use a source note to explain why
its usage is safe in this context.</li>
</ul>

<h3 id="todo-comments">TODO Comments</h3>

<p>We follow a simple convention for <code class="language-plaintext highlighter-rouge">TODO</code> comments in our codebases:</p>

<ul>
  <li>The line starts with <code class="language-plaintext highlighter-rouge">TODO</code> or <code class="language-plaintext highlighter-rouge">FIXME</code>.</li>
  <li>It is then followed by the author’s initials <code class="language-plaintext highlighter-rouge">[ARA]</code>, or for multiple people
<code class="language-plaintext highlighter-rouge">[ARA, WD]</code>, in square brackets.</li>
  <li>It is then followed by an explanation of what needs to be done.</li>
</ul>

<p>For example:</p>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- TODO [ARA] This is a bit of a kludge. Instead of X it should to Y, accounting</span>
<span class="c1">-- for the fact that Z.</span>
</code></pre></div></div>

<h3 id="other-comment-usage">Other Comment Usage</h3>

<p>There are, of course, a few other situations where commenting is very useful:</p>

<ul>
  <li><strong>Commenting Out:</strong> You may comment out code while developing it, but if you
commit any commented out code, it should be accompanied by an explanation of
why said code can’t just be deleted.</li>
  <li><strong>Bugs:</strong> You can use comments to indicate bugs in our code, as well as
third-party bugs. In both cases, the comment should link to the issue tracker
where the bug has been reported.</li>
</ul>

<h2 id="program-design">Program Design</h2>

<p>Any good style guide goes beyond purely stylistic rules, and also talks about
design styles to use in code.</p>

<h3 id="libraries">Libraries</h3>

<p>The Enso project has many internal libraries that are useful, but we have found
that maintaining these on Hackage while they are under such active development
is counterproductive.</p>

<p>Instead, libraries live in the <code class="language-plaintext highlighter-rouge">lib/</code> folder of the primary project with which
they are associated (Enso, Enso Studio, or Dataframes). These libraries may be
freely used by others of our projects by depending on a git commit of the
project that they live in. All of these are safe to use.</p>

<h4 id="prologue">Prologue</h4>

<p><code class="language-plaintext highlighter-rouge">Prologue</code> is our replacement for Haskell’s <code class="language-plaintext highlighter-rouge">Prelude</code>. For the most part it is
compatible with the prelude, though it is designed with a safe API as the first
port of call.</p>

<p>As a rule of thumb, if the prelude exports a partial function, that function has
been made total in Prologue. This usually takes the form of returning <code class="language-plaintext highlighter-rouge">Maybe</code>,
rather than throwing an error (e.g. <code class="language-plaintext highlighter-rouge">head :: [a] -&gt; Maybe a</code>). In the case where
a function has been redefined like this, the original version is available using
an unsafe name (e.g. <code class="language-plaintext highlighter-rouge">unsafeHead</code> in the case above).</p>

<p>Prologue also exports additional useful functionality from across the Haskell
ecosystem, such as utilities for working with Lenses and for writing type-level
computation.</p>

<p>It is highly recommended that you scan the code of Prologue.</p>

<h4 id="safety">Safety</h4>

<p>It is incredibly important that we can trust the code that we use, and hence we
tend to disallow the definition of unsafe functions in our public API. When
defining an unsafe function, you must account for the following:</p>

<ul>
  <li>It must be named <code class="language-plaintext highlighter-rouge">unsafeX</code>, as discussed in the section on <a href="#naming">naming</a>.</li>
  <li>Unsafe functions should only be used in the minimal scope in which it can be
shown correct, not in larger pieces of code.</li>
  <li>Unsafe function definition must be accompanied by a source note explaining why
it is not defined safely (e.g. performance).</li>
  <li>Unsafe function usage must be accompanied by a source note explaining why this
usage of it is safe.</li>
</ul>

<p>Furthermore, we do not allow for code containing pattern matches that can fail.</p>

<h4 id="controlmonadexception">Control.Monad.Exception</h4>

<p>We have our own exception framework based on <code class="language-plaintext highlighter-rouge">ExceptT</code> that encodes exception
usage at the type level. This ensures that all synchronous exceptions must be
dealt with.</p>

<p>It is defined in
<a href="https://github.com/enso-org/luna/tree/master/lib/exception"><code class="language-plaintext highlighter-rouge">lib/exception/</code></a>
and contains utilities for declaring that a function throws an exception, as
well as throwing and catching exceptions.</p>

<p>The primary part of this API is the <code class="language-plaintext highlighter-rouge">Throws</code> constraint, which can be passed
both a single exception type or a list of exceptions. It is a monadic exception
framework.</p>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">myFunction</span> <span class="o">::</span> <span class="kt">Throws</span> <span class="sc">'[</span><span class="err">M</span><span class="n">yErrorOne</span><span class="p">,</span> <span class="kt">MyErrorTwo</span><span class="p">]</span> <span class="n">m</span> <span class="o">=&gt;</span> <span class="kt">ArgType</span> <span class="o">-&gt;</span> <span class="n">m</span> <span class="kt">ReturnType</span>
</code></pre></div></div>

<p>We encourage our programmers to define their own exception types, and when doing
so they should use the following guidelines:</p>

<ul>
  <li>We name them using ‘Error’ rather than ‘Exception’, so <code class="language-plaintext highlighter-rouge">MyError</code>, rather than
<code class="language-plaintext highlighter-rouge">MyException</code>.</li>
  <li>We always provide an instance of <code class="language-plaintext highlighter-rouge">Exception</code> for our exception type.</li>
  <li>We avoid encoding error information as strings, instead passing a strongly
typed representation of the problem around. This often means that we end up
re-wrapping an error thrown inside our function.</li>
</ul>

<h3 id="modules">Modules</h3>

<p>Unlike much of the Haskell ecosystem, we tend to design modules to be imported
<em>qualified</em> rather than unqualified. This means that we have a few rules to keep
in mind:</p>

<ul>
  <li>When designing a module that exports a type, the module should be named after
that type. If it exports multiple types, there should be a primary type, or
the other types should be factored out into their own modules.</li>
  <li>We import modules as their name. If you have a module <code class="language-plaintext highlighter-rouge">Enso.Space.MyType</code>, we
import it qualified as <code class="language-plaintext highlighter-rouge">MyType</code>.</li>
  <li>Functions should be named with the assumption of being used qualified. This
means that we rarely refer to the module name in the function name (e.g.
<code class="language-plaintext highlighter-rouge">State.run</code> rather than <code class="language-plaintext highlighter-rouge">State.runState</code>).</li>
</ul>

<h3 id="data-declarations">Data Declarations</h3>

<p>When declaring data types in the Enso codebases, please make sure to keep the
following rules of thumb in mind:</p>

<ul>
  <li>
    <p>For single-constructor types:</p>

    <ul>
      <li>Write the definition across multiple lines.</li>
      <li>Always name your fields.</li>
      <li>Always generate lenses.</li>
    </ul>

    <div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">Rectangle</span> <span class="o">=</span> <span class="kt">MkRectangle</span>
    <span class="p">{</span> <span class="n">_width</span>  <span class="o">::</span> <span class="kt">Double</span>
    <span class="p">,</span> <span class="n">_height</span> <span class="o">::</span> <span class="kt">Double</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">)</span>
<span class="n">makeLenses</span> <span class="sc">''</span><span class="err">R</span><span class="n">ectangle</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>For multiple-constructor data-types:</p>

    <ul>
      <li>Write the definition across multiple lines.</li>
      <li>Never name your fields.</li>
      <li>Generate prisms only when necessary.</li>
    </ul>

    <div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">Shape</span>
    <span class="o">=</span> <span class="kt">ShapeCircle</span> <span class="kt">Circle</span>
    <span class="o">|</span> <span class="kt">ShapeRect</span>   <span class="kt">Rectangle</span>
    <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Eq</span><span class="p">,</span> <span class="kt">Ord</span><span class="p">,</span> <span class="kt">Show</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>Always prefer named fields over unnamed ones. You should only use unnamed
fields if one or more of the following hold:
    <ul>
      <li>Your data type is one where you are are <em>sure</em> that separate field access
will never be needed.</li>
      <li>You are defining a multiple-constructor data type.</li>
    </ul>
  </li>
  <li>Sort deriving clauses in alphabetical order, and derive the following for your
type if logically correct:
    <ul>
      <li>General Types: <code class="language-plaintext highlighter-rouge">Eq</code>, <code class="language-plaintext highlighter-rouge">Generic</code>, <code class="language-plaintext highlighter-rouge">NFData</code>, <code class="language-plaintext highlighter-rouge">Ord</code>, <code class="language-plaintext highlighter-rouge">Show</code>.</li>
      <li>Parametric 1-Types: <code class="language-plaintext highlighter-rouge">Applicative</code>, <code class="language-plaintext highlighter-rouge">Alternative</code>, <code class="language-plaintext highlighter-rouge">Functor</code>.</li>
      <li>Monads: <code class="language-plaintext highlighter-rouge">Monad</code>, <code class="language-plaintext highlighter-rouge">MonadFix</code>.</li>
      <li>Monad Transformers: <code class="language-plaintext highlighter-rouge">MonadTrans</code>.</li>
    </ul>
  </li>
</ul>

<h4 id="lenses">Lenses</h4>

<p>The Enso codebases make significant use of Lenses, and so we have some rules for
their use:</p>

<ul>
  <li>Always use the <code class="language-plaintext highlighter-rouge">makeLenses</code> wrapper exported from <code class="language-plaintext highlighter-rouge">Prologue</code>.</li>
  <li>Always generate lenses for single-constructor data types.</li>
  <li>Never generate lenses for multi-constructor data types (though you may
sometimes want to generate prisms).</li>
  <li>Fields in data types should be named with a single underscore.</li>
  <li>If you have multiple types where the fields need the same name, the <code class="language-plaintext highlighter-rouge">Prologue</code>
lens wrappers will disambiguate the names for you as follows as long as you
use a double underscore in the data declaration (e.g. <code class="language-plaintext highlighter-rouge">__x</code>).</li>
</ul>

<div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">Vector</span> <span class="o">=</span> <span class="kt">Vector</span>
    <span class="p">{</span> <span class="n">__x</span> <span class="o">::</span> <span class="kt">Double</span>
    <span class="p">,</span> <span class="n">__y</span> <span class="o">::</span> <span class="kt">Double</span>
    <span class="p">,</span> <span class="n">__z</span> <span class="o">::</span> <span class="kt">Double</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">)</span>
<span class="n">makeLenses</span> <span class="sc">''</span><span class="err">V</span><span class="n">ector</span>

<span class="kr">data</span> <span class="kt">Point</span> <span class="o">=</span> <span class="kt">Point</span>
    <span class="p">{</span> <span class="n">__x</span> <span class="o">::</span> <span class="kt">Double</span>
    <span class="p">,</span> <span class="n">__y</span> <span class="o">::</span> <span class="kt">Double</span>
    <span class="p">}</span> <span class="kr">deriving</span> <span class="p">(</span><span class="kt">Show</span><span class="p">)</span>
<span class="n">makeLenses</span> <span class="sc">''</span><span class="err">P</span><span class="n">oint</span>
</code></pre></div></div>

<p>This will generate lenses with names like <code class="language-plaintext highlighter-rouge">vector_x</code>, <code class="language-plaintext highlighter-rouge">vector_y</code>, and <code class="language-plaintext highlighter-rouge">point_x</code>,
<code class="language-plaintext highlighter-rouge">point_y</code>.</p>

<h3 id="testing-and-benchmarking">Testing and Benchmarking</h3>

<p>New code should always be accompanied by tests. These can be unit, integration,
or some combination of the two, and they should always aim to test the new code
in a rigorous fashion.</p>

<ul>
  <li>We tend to use <code class="language-plaintext highlighter-rouge">HSpec</code>, but also make use of QuickCheck for property-based
testing.</li>
  <li>Tests should be declared in the project configuration so they can be trivially
run, and should use the mechanisms HSpec provides for automatic test
discovery.</li>
  <li>A test file should be named after the module it tests. If the module is named
<code class="language-plaintext highlighter-rouge">Enso.MyModule</code>, then the test file should be named <code class="language-plaintext highlighter-rouge">Enso.MyModuleSpec</code>.</li>
</ul>

<p>Any performance-critical code should also be accompanied by a set of benchmarks.
These are intended to allow us to catch performance regressions as the code
evolves, but also ensure that we have some idea of the code’s performance in
general.</p>

<ul>
  <li>We use <code class="language-plaintext highlighter-rouge">Criterion</code> for our benchmarks.</li>
  <li>We measure time, but also memory usage and CPU time where possible.</li>
  <li>Where relevant, benchmarks may set thresholds which, when surpassed, cause the
benchmark to fail. These thresholds should be set for a release build, and not
for a development build.</li>
</ul>

<p><em>Do not benchmark a development build</em> as the data you get will often be
entirely useless.</p>

<h3 id="warnings-and-lints">Warnings, and Lints</h3>

<p>In general, we aim for a codebase that is free of warnings and lints, and we do
this using the following ideas:</p>

<h4 id="warnings">Warnings</h4>

<p>New code should introduce no new warnings onto main. You may build with warnings
on your own branch, but the code that is submitted as part of a PR should not
introduce new warnings. You should also endeavour to fix any warnings that you
come across during development.</p>

<p>Sometimes it is impossible to fix a warning (e.g. TemplateHaskell generated code
often warns about unused pattern matches). In such cases, you are allowed to
suppress the warning at the module level using an <code class="language-plaintext highlighter-rouge">OPTIONS_GHC</code> pragma, but this
must be accompanied by a source note explaining <em>why</em> the warning cannot be
fixed otherwise.</p>

<h4 id="lints">Lints</h4>

<p>We also recommend using HLint on your code as a stylistic guide, as we find that
its suggestions in general lead to more readable code. If you don’t know how to
set up automatic linting for your editor, somebody will be able to help.</p>

<p>An example of an anti-pattern that HLint will catch is the repeated-<code class="language-plaintext highlighter-rouge">$</code>. Instead
of <code class="language-plaintext highlighter-rouge">foo $ bar $ baz $ bam quux</code>, you should write <code class="language-plaintext highlighter-rouge">foo . bar. baz $ bam quux</code> to
use function composition.</p>

<h2 id="language-extensions">Language Extensions</h2>

<p>Much like any sophisticated Haskell codebase, Enso makes heavy use of the GHC
language extensions. We have a broad swath of extensions that are enabled by
default across our projects, and a further set which are allowed whenever
necessary. We also have a set of extensions that are allowed with care, which
must be used sparingly.</p>

<p>When enabling a non-default extension, we never do it at the project or package
level. Instead, they are enabled on a file-by-file basis using a <code class="language-plaintext highlighter-rouge">LANGUAGE</code>
pragma. You may also negate default extensions, if necessary, using this same
technique.</p>

<p>It should be noted that not all of the extensions listed below are available
across all compiler versions. If you are unsure whether an extension is
available to you, we recommend checking the GHC Users Guide entry for that
extension (linked from the extension’s table below).</p>

<h3 id="default-extensions">Default Extensions</h3>

<p>The following language extensions are considered to be so safe, or to have such
high utility, that they are considered to be Enso’s set of default extensions.
You can find said set of extensions for Enso itself defined in a
<a href="https://github.com/enso-org/luna/blob/master/config/hpack-common.yaml">common configuration file</a>.</p>

<h4 id="allowambiguoustypes">AllowAmbiguousTypes</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-AllowAmbiguousTypes"><code class="language-plaintext highlighter-rouge">AllowAmbiguousTypes</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XAllowAmbiguousTypes</code></td>
    </tr>
  </tbody>
</table>

<p>This extension is particularly useful in the context of <code class="language-plaintext highlighter-rouge">-XTypeApplications</code>
where the use of type applications can disambiguate the call to an ambiguous
function.</p>

<p>We often use the design pattern where a function has a free type variable not
used by any of its arguments, which is then applied via type applications. This
would not be possible without <code class="language-plaintext highlighter-rouge">-XAllowAmbiguousTypes</code>.</p>

<h4 id="applicativedo">ApplicativeDo</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-ApplicativeDo"><code class="language-plaintext highlighter-rouge">ApplicativeDo</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XApplicativeDo</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows desugaring of do-notation based on applicative operations
(<code class="language-plaintext highlighter-rouge">&lt;$&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;*&gt;</code>, and <code class="language-plaintext highlighter-rouge">join</code>) as far as is possible. This will preserve the
original semantics as long as the type has an appropriate applicative instance.</p>

<p>Applicative operations are often easier to optimise than monadic ones, so if you
can write a computation using applicatives please do. This is the same reason
that we prefer <code class="language-plaintext highlighter-rouge">pure</code> to <code class="language-plaintext highlighter-rouge">return</code>.</p>

<h4 id="bangpatterns">BangPatterns</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-BangPatterns"><code class="language-plaintext highlighter-rouge">BangPatterns</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XBangPatterns</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows for strict pattern matching, where the type being matched
against is evaluated to WHNF before the match takes place. This is very useful
in performance critical code where you want more control over strictness and
laziness.</p>

<h4 id="binaryliterals">BinaryLiterals</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-BinaryLiterals"><code class="language-plaintext highlighter-rouge">BinaryLiterals</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XBinaryLiterals</code></td>
    </tr>
  </tbody>
</table>

<p>This extensions allow for binary literals to be written using the <code class="language-plaintext highlighter-rouge">0b</code> prefix.
This can be very useful when writing bit-masks, and other low-level code.</p>

<h4 id="constraintkinds">ConstraintKinds</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-ConstraintKinds"><code class="language-plaintext highlighter-rouge">ConstraintKinds</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XConstraintKinds</code></td>
    </tr>
  </tbody>
</table>

<p>This allows any types which have kind <code class="language-plaintext highlighter-rouge">Constraint</code> to be used in contexts (in
functions, type-classes, etc). This works for class constraints, implicit
parameters, and type quality constraints. It also enables type constraint
synonyms.</p>

<p>All of these are very useful.</p>

<h4 id="datakinds">DataKinds</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DataKinds"><code class="language-plaintext highlighter-rouge">DataKinds</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDataKinds</code></td>
    </tr>
  </tbody>
</table>

<p>This extension enables the promotion of data types to be kinds. All data types
are promoted to kinds and the value constructors are promoted to type
constructors.</p>

<p>This is incredibly useful, and used heavily in the type-level programming that
makes the Enso codebase so expressive and yet so safe.</p>

<h4 id="defaultsignatures">DefaultSignatures</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DefaultSignatures"><code class="language-plaintext highlighter-rouge">DefaultSignatures</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDefaultSignatures</code></td>
    </tr>
  </tbody>
</table>

<p>When you declare a default in a typeclass, it conventionally has to have exactly
the same type signature as the typeclass method. This extension lifts this
restriction to allow you to specify a more-specific signature for the default
implementation of a typeclass method.</p>

<h4 id="derivedatatypeable">DeriveDataTypeable</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DeriveDataTypeable"><code class="language-plaintext highlighter-rouge">DeriveDataTypeable</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDeriveDataTypeable</code></td>
    </tr>
  </tbody>
</table>

<p>This extension enables deriving of the special kind-polymorphic <code class="language-plaintext highlighter-rouge">Typeable</code>
typeclass. Instances of this class cannot be written by hand, and they associate
type representations with types. This is often useful for low-level programming.</p>

<h4 id="derivefoldable">DeriveFoldable</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DeriveFoldable"><code class="language-plaintext highlighter-rouge">DeriveFoldable</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDeriveFoldable</code></td>
    </tr>
  </tbody>
</table>

<p>This enables deriving of the <code class="language-plaintext highlighter-rouge">Foldable</code> typeclass, which represents structures
that can be folded over. This allows automated deriving for any data type with
kind <code class="language-plaintext highlighter-rouge">Type -&gt; Type</code>.</p>

<h4 id="derivefunctor">DeriveFunctor</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DeriveFunctor"><code class="language-plaintext highlighter-rouge">DeriveFunctor</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDeriveFunctor</code></td>
    </tr>
  </tbody>
</table>

<p>This enables automated deriving of the <code class="language-plaintext highlighter-rouge">Functor</code> typeclass for any data type
with kind <code class="language-plaintext highlighter-rouge">Type -&gt; Type</code>.</p>

<h4 id="derivegeneric">DeriveGeneric</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DeriveGeneric"><code class="language-plaintext highlighter-rouge">DeriveGeneric</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDeriveGeneric</code></td>
    </tr>
  </tbody>
</table>

<p>Enables automated deriving of the <code class="language-plaintext highlighter-rouge">Generic</code> typeclass. Generic is a typeclass
that represents the structure of data types in a generic fashion, allowing for
generic programming.</p>

<h4 id="derivetraversable">DeriveTraversable</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DeriveTraversable"><code class="language-plaintext highlighter-rouge">DeriveTraversable</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDeriveTraversable</code></td>
    </tr>
  </tbody>
</table>

<p>Enables automated deriving of the <code class="language-plaintext highlighter-rouge">Traversable</code> typeclass that represents types
that can be traversed. It is a valid derivation for any data type with kind
<code class="language-plaintext highlighter-rouge">Type -&gt; Type</code>.</p>

<h4 id="derivingstrategies">DerivingStrategies</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DerivingStrategies"><code class="language-plaintext highlighter-rouge">DerivingStrategies</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDerivingStrategies</code></td>
    </tr>
  </tbody>
</table>

<p>Under certain circumstances it can be ambiguous as to which method to use to
derive an instance of a class for a data type. This extension allows users to
manually supply the strategy by which an instance is derived.</p>

<p>If it is not specified, it uses the defaulting rules as described at the above
link.</p>

<h4 id="derivingvia">DerivingVia</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DerivingVia"><code class="language-plaintext highlighter-rouge">DerivingVia</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDerivingVia</code></td>
    </tr>
  </tbody>
</table>

<p>This allows deriving a class instance for a type by specifying another type of
equal runtime representation (such that there exists a Coercible instance
between the two). It is indicated by use of the <code class="language-plaintext highlighter-rouge">via</code> deriving strategy, and
requires the specification of another type (the via-type) to coerce through.</p>

<h4 id="duplicaterecordfields">DuplicateRecordFields</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DuplicateRecordFields"><code class="language-plaintext highlighter-rouge">DuplicateRecordFields</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XDuplicateRecordFields</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows definitions of records with identically named fields. This
is very useful in the context of Prologue’s <code class="language-plaintext highlighter-rouge">makeLenses</code> wrapper as discussed
above in the section on <a href="#lenses">lenses</a>.</p>

<h4 id="emptydatadecls">EmptyDataDecls</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-EmptyDataDecls"><code class="language-plaintext highlighter-rouge">EmptyDataDecls</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XEmptyDataDecls</code></td>
    </tr>
  </tbody>
</table>

<p>Allows the definition of data types with no value constructors. This is very
useful in conjunction with <code class="language-plaintext highlighter-rouge">-XDataKinds</code> to allow the creation of more safety
properties in types through the use of rich kinds.</p>

<h4 id="flexiblecontexts">FlexibleContexts</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-FlexibleContexts"><code class="language-plaintext highlighter-rouge">FlexibleContexts</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XFlexibleContexts</code></td>
    </tr>
  </tbody>
</table>

<p>This enables the use of complex constraints in class declarations. This means
that anything with kind <code class="language-plaintext highlighter-rouge">Constraint</code> is usable in a class declaration’s context.</p>

<h4 id="flexibleinstances">FlexibleInstances</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-FlexibleInstances"><code class="language-plaintext highlighter-rouge">FlexibleInstances</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XFlexibleInstances</code></td>
    </tr>
  </tbody>
</table>

<p>This allows the definition of typeclasses with arbitrarily-nested types in the
instance head. This, like many of these extensions, is enabled by default to
support rich type-level programming.</p>

<h4 id="functional-dependencies">Functional Dependencies</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-FunctionalDependencies"><code class="language-plaintext highlighter-rouge">FunctionalDependencies</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XFunctionalDependencies</code></td>
    </tr>
  </tbody>
</table>

<p>Despite this extension being on the ‘defaults’ list, this is only for the very
rare 1% of cases where Functional Dependencies allow you to express a construct
that Type Families do not.</p>

<p>You should never need to use a Functional Dependency, and if you think you do it
is likely that your code can be expressed in a far more clean manner by using
Type Families.</p>

<h4 id="generalizednewtypederiving">GeneralizedNewtypeDeriving</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-GeneralizedNewtypeDeriving"><code class="language-plaintext highlighter-rouge">GeneralizedNewtypeDeriving</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XGeneralizedNewtypeDeriving</code></td>
    </tr>
  </tbody>
</table>

<p>This enables the generalised deriving mechanism for <code class="language-plaintext highlighter-rouge">newtype</code> definitions. This
means that a newtype can inherit some instances from its representation. This
has been somewhat superseded by <code class="language-plaintext highlighter-rouge">-XDerivingVia</code></p>

<h4 id="instancesigs">InstanceSigs</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-InstanceSigs"><code class="language-plaintext highlighter-rouge">InstanceSigs</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XInstanceSigs</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows you to write type signatures in the instance definitions
for type classes. This signature must be identical to, or more polymorphic than,
the signature provided in the class definition.</p>

<h4 id="lambdacase">LambdaCase</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-LambdaCase"><code class="language-plaintext highlighter-rouge">LambdaCase</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XLambdaCase</code></td>
    </tr>
  </tbody>
</table>

<p>Enables <code class="language-plaintext highlighter-rouge">\case</code> as an alternative to <code class="language-plaintext highlighter-rouge">case &lt;...&gt; of</code>. This often results in much
cleaner code.</p>

<h4 id="liberaltypesynonyms">LiberalTypeSynonyms</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-LiberalTypeSynonyms"><code class="language-plaintext highlighter-rouge">LiberalTypeSynonyms</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XLiberalTypeSynonyms</code></td>
    </tr>
  </tbody>
</table>

<p>This extension moves the type synonym validity check to <em>after</em> the synonym is
expanded, rather than before. This makes said synonyms more useful in the
context of type-level programming constructs.</p>

<h4 id="monadcomprehensions">MonadComprehensions</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-GeneralizedNewtypeDeriving"><code class="language-plaintext highlighter-rouge">GeneralizedNewtypeDeriving</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XGeneralizedNewtypeDeriving</code></td>
    </tr>
  </tbody>
</table>

<p>Enables a generalisation of the list comprehension notation that works across
any type that is an instance of <code class="language-plaintext highlighter-rouge">Monad</code>.</p>

<h4 id="multiparamtypeclasses">MultiParamTypeClasses</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-MultiParamTypeClasses"><code class="language-plaintext highlighter-rouge">MultiParamTypeClasses</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XMultiParamTypeClasses</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the ability to write type classes with multiple parameters. This is very
useful for type-level programming, and to express relationships between types in
typeclasses.</p>

<h4 id="multiwayif">MultiWayIf</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-MultiWayIf"><code class="language-plaintext highlighter-rouge">MultiWayIf</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XMultiWayIf</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows GHC to accept conditional expressions with multiple
branches, using the guard-style notation familiar from function definitions.</p>

<h4 id="namedwildcards">NamedWildCards</h4>

<h4 id="negativeliterals">NegativeLiterals</h4>

<h4 id="noimplicitprelude">NoImplicitPrelude</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-NoImplicitPrelude"><code class="language-plaintext highlighter-rouge">NoImplicitPrelude</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XNoImplicitPrelude</code></td>
    </tr>
  </tbody>
</table>

<p>Disables the implicit import of the prelude into every module. This enables us
to use <code class="language-plaintext highlighter-rouge">Prologue</code>, our own custom prelude (discussed in the section on
<a href="#prologue">prologue</a>).</p>

<h4 id="numdecimals">NumDecimals</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-NumDecimals"><code class="language-plaintext highlighter-rouge">NumDecimals</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XNumDecimals</code></td>
    </tr>
  </tbody>
</table>

<p>Enables writing integer literals using exponential syntax.</p>

<h4 id="overloadedlabels">OverloadedLabels</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-OverloadedLabels"><code class="language-plaintext highlighter-rouge">OverloadedLabels</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XOverloadedLabels</code></td>
    </tr>
  </tbody>
</table>

<p>Enables support for Overloaded Labels, a type of identifier whose type depends
both on its literal text and its kind. This is similar to <code class="language-plaintext highlighter-rouge">-XOverloadedStrings</code>.</p>

<h4 id="overloadedstrings">OverloadedStrings</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-OverloadedStrings"><code class="language-plaintext highlighter-rouge">OverloadedStrings</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XOverloadedStrings</code></td>
    </tr>
  </tbody>
</table>

<p>Enables overloading of the native <code class="language-plaintext highlighter-rouge">String</code> type. This means that string literals
are given their type based on contextual information as, and a string literal
can be used to represent any type that is an instance of <code class="language-plaintext highlighter-rouge">IsString</code>.</p>

<h4 id="patternsynonyms">PatternSynonyms</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-PatternSynonyms"><code class="language-plaintext highlighter-rouge">PatternSynonyms</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XPatternSynonyms</code></td>
    </tr>
  </tbody>
</table>

<p>Pattern synonyms enable giving names to parametrized pattern schemes. They can
also be thought of as abstract constructors that don’t have a bearing on data
representation. They can be unidirectional or bidirectional, and are incredibly
useful for defining clean APIs to not-so-clean data.</p>

<h4 id="quasiquotes">QuasiQuotes</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-QuasiQuotes"><code class="language-plaintext highlighter-rouge">QuasiQuotes</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XQuasiQuotes</code></td>
    </tr>
  </tbody>
</table>

<p>Quasi-quotation allows patterns and expressions to be written using
programmer-defined concrete syntax. This extension enables the use of quotations
in Haskell source files.</p>

<h4 id="rankntypes">RankNTypes</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-RankNTypes"><code class="language-plaintext highlighter-rouge">RankNTypes</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XRankNTypes</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the ability to express arbitrary-rank polymorphic types (those with a
<code class="language-plaintext highlighter-rouge">forall</code> which is not on the far left of the type). These are incredibly useful
for defining clean and safe APIs.</p>

<h4 id="recursivedo">RecursiveDo</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-RecursiveDo"><code class="language-plaintext highlighter-rouge">RecursiveDo</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XRecursiveDo</code></td>
    </tr>
  </tbody>
</table>

<p>This extension enables recursive binding in do-notation for any monad which is
an instance of MonadFix. Bindings introduced in this context are recursively
defined, much as for an ordinary <code class="language-plaintext highlighter-rouge">let</code>-expression.</p>

<h4 id="scopedtypevariables">ScopedTypeVariables</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-ScopedTypeVariables"><code class="language-plaintext highlighter-rouge">ScopedTypeVariables</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XScopedTypeVariables</code></td>
    </tr>
  </tbody>
</table>

<p>This enables lexical scoping of type variables introduced using an explicit
<code class="language-plaintext highlighter-rouge">forall</code> in the type signature of a function. With this extension enabled, the
scope of this variables is extended to the function body.</p>

<h4 id="standalonederiving">StandaloneDeriving</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-StandaloneDeriving"><code class="language-plaintext highlighter-rouge">StandaloneDeriving</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XStandaloneDeriving</code></td>
    </tr>
  </tbody>
</table>

<p>Allows the creation of <code class="language-plaintext highlighter-rouge">deriving</code> declarations that are not directly associated
with the class that is being derived. This is useful in the context where you
need to create orphan instances, or to derive some non-default classes.</p>

<h4 id="strict">Strict</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-Strict"><code class="language-plaintext highlighter-rouge">Strict</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XStrict</code></td>
    </tr>
  </tbody>
</table>

<p>We have found that making our code strict-by-default allows us to reason much
more easily about its performance. When we want lazy evaluation, we use a
combination of the negation flags and lazy pattern matching to achieve our
goals.</p>

<p>When disabling strict for a module using <code class="language-plaintext highlighter-rouge">-XNoStrict</code>, you also need to add
<code class="language-plaintext highlighter-rouge">-XNoStrictData</code>.</p>

<h4 id="strictdata">StrictData</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-StrictData"><code class="language-plaintext highlighter-rouge">StrictData</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XStrictData</code></td>
    </tr>
  </tbody>
</table>

<p>Much like the above, this helps with reasoning about performance, but needs to
be explicitly disabled in contexts where the strictness is undesirable.</p>

<h4 id="templatehaskell">TemplateHaskell</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-TemplateHaskell"><code class="language-plaintext highlighter-rouge">TemplateHaskell</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XTemplateHaskell</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the usage of Template Haskell, including the syntax for splices and
quotes. TH is a meta-language that allows for generating Haskell code from
arbitrary input.</p>

<h4 id="tuplesections">TupleSections</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-TupleSections"><code class="language-plaintext highlighter-rouge">TupleSections</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XTupleSections</code></td>
    </tr>
  </tbody>
</table>

<p>Much like we can do operator sections to partially apply operators, this
extension enables partial application of tuple constructors.</p>

<h4 id="typeapplications">TypeApplications</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-TypeApplications"><code class="language-plaintext highlighter-rouge">TypeApplications</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XTypeApplications</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows you to use visible type application in expressions. This
allows for easily providing types that are ambiguous (or otherwise) to GHC in a
way that doesn’t require writing complete type signatures. We make heavy use of
type applications in our type-level programming and API.</p>

<p>These should always be used as an alternative to <code class="language-plaintext highlighter-rouge">Proxy</code>, as they are just as
useful for passing type information around without provision of data, and lead
to nice and clean APIs.</p>

<h4 id="typefamilies">TypeFamilies</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-TypeFamilies"><code class="language-plaintext highlighter-rouge">TypeFamilies</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XTypeFamilies</code></td>
    </tr>
  </tbody>
</table>

<p>Type Families can be thought of as type-level functions, or functions on types.
They are slightly more verbose than functional dependencies, but provide much
better reusability, clearer contexts, and are far easier to compose. They should
always be used in preference to functional dependencies.</p>

<p>When using Type Families, please keep the following things in mind:</p>

<ul>
  <li>Prefer open type families to closed type families.</li>
  <li>
    <p>Use closed type families if you want a fall-back when checking types.</p>

    <div class="language-hs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">type</span> <span class="n">family</span> <span class="kt">SumOf</span> <span class="kr">where</span>
    <span class="kt">SumOf</span> <span class="kt">Vector</span> <span class="n">a</span>      <span class="o">=</span> <span class="kt">Vector</span>
    <span class="kt">SumOf</span> <span class="n">a</span>      <span class="kt">Vector</span> <span class="o">=</span> <span class="kt">Vector</span>
    <span class="kt">SumOf</span> <span class="n">a</span>      <span class="n">a</span>      <span class="o">=</span> <span class="n">a</span>
</code></pre></div>    </div>
  </li>
  <li>Do not use closed type families unless you are absolutely sure that your type
family should not be able to be extended in the future.</li>
</ul>

<h4 id="typefamilydependencies">TypeFamilyDependencies</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-TypeFamilyDependencies"><code class="language-plaintext highlighter-rouge">TypeFamilyDependencies</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XTypeFamilyDependencies</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows type families to be annotated with injectivity information
using syntax similar to that used for functional dependencies. This information
is used by GHC during type-checking to resolve the types of expressions that
would otherwise be ambiguous.</p>

<h4 id="typeoperators">TypeOperators</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-TypeOperators"><code class="language-plaintext highlighter-rouge">TypeOperators</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XTypeOperators</code></td>
    </tr>
  </tbody>
</table>

<p>Type operators is a simple extension that allows for the definition of types
with operators as their names. Much like you can define term-level operators,
this lets you define type-level operators. This is a big boon for the
expressiveness of type-level APIs.</p>

<h4 id="unicodesyntax">UnicodeSyntax</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-UnicodeSyntax"><code class="language-plaintext highlighter-rouge">UnicodeSyntax</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XUnicodeSyntax</code></td>
    </tr>
  </tbody>
</table>

<p>Enables unicode syntax for certain parts of the Haskell language.</p>

<h4 id="viewpatterns">ViewPatterns</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-ViewPatterns"><code class="language-plaintext highlighter-rouge">ViewPatterns</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XViewPatterns</code></td>
    </tr>
  </tbody>
</table>

<p>View patterns provide a mechanism for pattern matching against abstract types by
letting the programmer execute arbitrary logic as part of a pattern match. This
is very useful for the creation of clean APIs.</p>

<h3 id="allowed-extensions">Allowed Extensions</h3>

<p>These extensions can be used in your code without reservation, but are not
enabled by default because they may interact negatively with other parts of the
codebase.</p>

<h4 id="blockarguments">BlockArguments</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-BlockArguments"><code class="language-plaintext highlighter-rouge">BlockArguments</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XBlockArguments</code></td>
    </tr>
  </tbody>
</table>

<p>Block arguments allow expressions such as <code class="language-plaintext highlighter-rouge">do</code>, <code class="language-plaintext highlighter-rouge">\</code>, <code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">case</code>, and <code class="language-plaintext highlighter-rouge">let</code>, to
be used as both arguments to operators and to functions. This can often make
code more readable than it otherwise would be.</p>

<h4 id="gadts">GADTs</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-GADTs"><code class="language-plaintext highlighter-rouge">GADTs</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XGADTs</code></td>
    </tr>
  </tbody>
</table>

<p>This enables Generalised Algebraic Data Types, which expand upon normal data
definitions to allow both contexts for constructors and richer return types.
When this extension is enabled, there is a new style of data declaration
available for declaring GADTs.</p>

<h4 id="hexfloatliterals">HexFloatLiterals</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-HexFloatLiterals"><code class="language-plaintext highlighter-rouge">HexFloatLiterals</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XHexFloatLiterals</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the ability to specify floating point literals using hexadecimal to
ensure that no rounding or truncation takes place.</p>

<h4 id="magichash">MagicHash</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-MagicHash"><code class="language-plaintext highlighter-rouge">MagicHash</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XMagicHash</code></td>
    </tr>
  </tbody>
</table>

<p>Allows the use of <code class="language-plaintext highlighter-rouge">#</code> as a postfix modifier to identifiers. This allows the
programmer to refer to the names of many of GHC’s internal unboxed types for use
in surface Haskell.</p>

<h4 id="numericunderscores">NumericUnderscores</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-NumericUnderscores"><code class="language-plaintext highlighter-rouge">NumericUnderscores</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XNumericUnderscores</code></td>
    </tr>
  </tbody>
</table>

<p>This extension allows breaking up of long numeric literals using underscores
(e.g <code class="language-plaintext highlighter-rouge">1_000_000_000</code>), which can often aid readability.</p>

<h4 id="polykinds">PolyKinds</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-PolyKinds"><code class="language-plaintext highlighter-rouge">PolyKinds</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XPolyKinds</code></td>
    </tr>
  </tbody>
</table>

<p>This extension enables users to access the full power of GHC’s kind system, and
allows for programming with kinds as well as types and values. It expands the
scope of kind inference to bring additional power, but is sometimes unable to
infer types at the value level as a result.</p>

<p>You should only enable <code class="language-plaintext highlighter-rouge">-XPolyKinds</code> in contexts where you need the power that
it brings.</p>

<h4 id="quantified-constraints">Quantified Constraints</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-QuantifiedConstraints"><code class="language-plaintext highlighter-rouge">QuantifiedConstraints</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XQuantifiedConstraints</code></td>
    </tr>
  </tbody>
</table>

<p>Quantified constraints bring additional expressiveness to the constraint
language used in contexts in GHC Haskell. In essence, it allows for contexts to
contain nested contexts, and hence for users to express more complex constraints
than they would otherwise be able to.</p>

<h4 id="roleannotations">RoleAnnotations</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-RoleAnnotations"><code class="language-plaintext highlighter-rouge">RoleAnnotations</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XRoleAnnotations</code></td>
    </tr>
  </tbody>
</table>

<p>Role annotations allow programmers to constrain the type inference process by
specifying the roles of the class and type parameters that they declare.</p>

<h4 id="unboxedsums">UnboxedSums</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-UnboxedSums"><code class="language-plaintext highlighter-rouge">UnboxedSums</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XUnboxedSums</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the syntax for writing anonymous, unboxed sum types. These can be very
useful for writing performance critical code, as they can be used as a standard
anonymous sum type, including in pattern matching and at the type level.</p>

<h4 id="unboxedtuples">UnboxedTuples</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-UnboxedTuples"><code class="language-plaintext highlighter-rouge">UnboxedTuples</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XUnboxedTuples</code></td>
    </tr>
  </tbody>
</table>

<p>This extension enables the syntax and use of unboxed tuples. This can be thought
of as a dual to the above <code class="language-plaintext highlighter-rouge">-XunboxedSums</code> as it allows for the declaration and
manipulation of unboxed product types.</p>

<h3 id="allowed-with-care">Allowed With Care</h3>

<p>If you make use of any of these extensions in your code, you should accompany
their usage by a source note that explains why they are used.</p>

<h4 id="capiffi">CApiFFI</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-CApiFFI"><code class="language-plaintext highlighter-rouge">CApiFFI</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XCApiFFI</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the <code class="language-plaintext highlighter-rouge">capi</code> calling convention for foreign function declarations. This
should only be used when you need to call a foreign function using the C-level
API, rather than across the platform’s ABI. This enables the programmer to make
use of preprocessor macros and the like, as the call is resolved as if it was
against the C language.</p>

<h4 id="cpp">CPP</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-CPP"><code class="language-plaintext highlighter-rouge">CPP</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XCPP</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the C preprocessor. We strongly discourage use of the preprocessor, but
it is sometimes unavoidable when you need to do purely string-based
preprocessing of a Haskell source file. It should only be used if you have <em>no</em>
<em>other</em> solution to your problem.</p>

<h4 id="postfixoperators">PostfixOperators</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-PostfixOperators"><code class="language-plaintext highlighter-rouge">PostfixOperators</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XPostfixOperators</code></td>
    </tr>
  </tbody>
</table>

<p>Enables the definition of left-sections for postfix operators. Please take care
if you enable this that it does not lead to unclear code. You should not export
a postfix operator from a module, as we do not condone enabling this throughout
the entire codebase.</p>

<h4 id="staticpointers">StaticPointers</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-StaticPointers"><code class="language-plaintext highlighter-rouge">StaticPointers</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XStaticPointers</code></td>
    </tr>
  </tbody>
</table>

<p>Allows static resolution of a limited subset of expressions to a value at
compile time. This allows for some precomputation of values during compilation
for later lookup at runtime. While this can be useful for some low-level code,
much care must be taken when it is used.</p>

<h4 id="undecidableinstances">UndecidableInstances</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-UndecidableInstances"><code class="language-plaintext highlighter-rouge">UndecidableInstances</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XUndecidableInstances</code></td>
    </tr>
  </tbody>
</table>

<p>This extension permits the definition of typeclass instances that could
potentially lead to non-termination of the type-checker. This is sometimes
necessary to define the instance you want, but care must be taken to ensure that
you only enable this extension when you are <em>sure</em> that your instances are
terminating.</p>

<h4 id="undecidablesuperclasses">UndecidableSuperclasses</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>Name</strong></td>
      <td style="text-align: left"><a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-UndecidableSuperclasses"><code class="language-plaintext highlighter-rouge">UndecidableSuperclasses</code></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>Flag</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">-XUndecidableSuperclasses</code></td>
    </tr>
  </tbody>
</table>

<p>Permits the definition of superclass constraints which can potentially lead to
the non-termination of the type-checker. Much like the above, this is sometimes
necessary but should only be enabled when you are <em>sure</em> that you will not cause
the typechecker to loop.</p>

<h3 id="disallowed-extensions">Disallowed Extensions</h3>

<p>If a language extension hasn’t been listed in the above sections, then it is
considered to be disallowed throughout the Enso codebases. If you have a good
reason to want to use one of these disallowed extensions, please talk to Ara or
Wojciech to discuss its usage.</p>

<p>If an extension not listed above is <em>implied</em> by one of the extensions listed
above (e.g. <code class="language-plaintext highlighter-rouge">-XRankNTypes</code> implies <code class="language-plaintext highlighter-rouge">-XExplicitForall</code>), then the implied
extension is also considered at least as safe as the category the implying
extension is in.</p>

                        
                        
                          
                            
                            
                            
                            
                            
                            <a href="https://github.com/enso-org/enso/blob/main/docs/style-guide/haskell.md">Open this doc on GitHub</a>
                          
                        

                    </section>
                </div>

                 <!--<div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
var search = instantsearch({
  appId: '3PBI3MMCBE',
  apiKey: '55d673c313b717b7386df8c9418588d4',
  indexName: 'jekyll',
  searchFunction(helper) {
    var container = document.querySelector('#search-hits');
    container.style.display = helper.state.query === '' ? 'none' : '';

    helper.search();
  }
});

var hitTemplate = function(hit) {
  let date = '';
  if (hit.date) {
    date = moment.unix(hit.date).format('MMM D, YYYY');
  }

  let url = `${hit.url}#${hit.anchor}`;

  var title = hit._highlightResult.title.value;

  var content = hit._highlightResult.html.value;

  return `
    <li class="post-item chapter">
      <a href="${url}" class="post-link">${title}</a>
      <div class="post-snippet">${content}</div>
    </li>
  `;
}


search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-searchbar',
    placeholder: 'Search the docs',
    poweredBy: true // This is required if you're on the free Community plan
  })
);

search.addWidget(
  instantsearch.widgets.hits({
    container: '#search-hits',
    templates: {
      item: hitTemplate
    }
  })
);

search.start();
</script>

<style>
.ais-search-box {
  max-width: 100%;
  margin-bottom: 15px;
}
.post-item {
  margin-bottom: 30px;
}
.post-link .ais-Highlight {
  color: #111;
  font-style: normal;
  text-decoration: underline;
}
.post-breadcrumbs {
  color: #424242;
  display: block;
}
.post-breadcrumb {
  font-size: 18px;
  color: #424242;
}
.post-breadcrumb .ais-Highlight {
  font-weight: bold;
  font-style: normal;
}
.post-snippet .ais-Highlight {
  color: #2a7ae2;
  font-style: normal;
  font-weight: bold;
}
.post-snippet img {
  display: none;
}

.post-list {
    list-style:none;
    margin:0;
    padding: 10px 15px;
    -webkit-transition:top .5s ease;
    -moz-transition:top .5s ease;
    -o-transition:top .5s ease;
    transition:top .5s ease
}

#search-hits::after {
    content: '';
    display: block;
    height: 1px;
    margin: 7px 0;
    overflow: hidden;
    background: rgba(0,0,0,.07);
}
</style>-->
            </div>
        </div>
    </div>
</div>

                <a href="/docs/enso/style-guide/rust.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Rust Style Guide">
                    <i class="fa fa-angle-left"></i>
                </a>
                

                
                    <a href="/docs/enso/style-guide/markdown.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Markdown Style Guide">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},
            "sharing": {
                "all": ["facebook", "google", "twitter", "weibo", "instapaper"],
                "facebook": true,
                "google": false,
                "instapaper": false,
                "twitter": true,
                "vk": false,
                "weibo": false
            },
            "theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            }
        },
        "theme": "default",
        "author": "Tao He",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "Enso Developer Documentation",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "docs/enso/style-guide/haskell.md",
        "mtime": "",
        "type": "markdown"
    },
    "gitbook": {
        "version": "3.2.3",
        "time": "2020-12-16 11:35:34 +0000"
    },
    "basePath": "",
    "book": {
        "language": ""
    }
});
            });
            </script>
        </div><script src="/gitbook/gitbook.js"></script>
<script src="/gitbook/theme.js"></script>

<script src="/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>

<!-- <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script> --></body>
</html>